# Proyecto Iceplay
_Exported on 1/9/2026 at 17:00:37 GMT-5 from Cursor (2.3.29)_

---

**User**

te cuerdas de mi proyecto iceplay?

---

**Cursor**


Revisando la estructura del proyecto para entenderlo mejor.



**Iceplay** es una aplicaciÃ³n Angular 21 para gestiÃ³n deportiva. Resumen:

## CaracterÃ­sticas principales

**Arquitectura:**
- Angular 21 con componentes standalone
- Angular Material + Tailwind CSS
- Signals para estado
- json-server como API mock (puerto 3000)
- i18n (espaÃ±ol e inglÃ©s)

**Roles de usuario:**
- `super_admin`: acceso completo (empleados de Fropen)
- `admin`: administrador de organizaciÃ³n/liga

**MÃ³dulos principales:**

1. **AutenticaciÃ³n** (`auth.service.ts`):
   - Login con email
   - GestiÃ³n de tokens y sesiÃ³n
   - Guards para rutas protegidas

2. **Admin Panel**:
   - Campeonatos (listado, detalle, formulario)
   - Equipos (listado, detalle, formulario)
   - Jugadores (listado, formulario)
   - Partidos (listado, control)
   - Fixtures (generador, listado)
   - Clasificaciones
   - EstadÃ­sticas
   - Dashboard

3. **Super Admin Panel**:
   - Organizaciones
   - Administradores
   - Anuncios
   - Reportes
   - ConfiguraciÃ³n

4. **PÃºblico**:
   - Listado de partidos
   - Detalles de partido
   - Live Match Logger

**Modelos principales:**
- User, Organization, Championship, Team, Player, Match, Event, Standing, Announcement, SportConfig

Â¿En quÃ© quieres trabajar o quÃ© necesitas modificar?

---

**User**

Para la parte del Live Match Logger quiero saber que puedo utilizar Colas (Kafka, RabbitMQ ) o Websockets ya que esta parte es en "tiempo real" 

---

**Cursor**


Revisando la implementaciÃ³n actual del Live Match Logger para recomendar la mejor opciÃ³n de tiempo real.



Revisando el cÃ³digo, el Live Match Logger es local y `MatchEventService` usa polling cada 3 segundos. Para tiempo real, aquÃ­ va la comparaciÃ³n y recomendaciÃ³n:

## ComparaciÃ³n: WebSockets vs Colas de MensajerÃ­a

### WebSockets (recomendado para tu caso)

Ventajas:
- ComunicaciÃ³n bidireccional en tiempo real
- Baja latencia (< 100ms)
- Ideal para sincronizar mÃºltiples usuarios viendo el mismo partido
- ConexiÃ³n persistente, menos overhead que HTTP
- ImplementaciÃ³n mÃ¡s simple para este caso de uso

CuÃ¡ndo usar:
- SincronizaciÃ³n de eventos en vivo (goles, tarjetas, cambios)
- ActualizaciÃ³n del cronÃ³metro en tiempo real
- Chat/comentarios durante el partido
- Notificaciones push instantÃ¡neas

### Colas de MensajerÃ­a (Kafka/RabbitMQ)

Ventajas:
- Procesamiento asÃ­ncrono y desacoplado
- Escalabilidad horizontal
- Persistencia y replay de mensajes
- Bueno para procesamiento batch y analytics

CuÃ¡ndo usar:
- Procesar eventos despuÃ©s del partido (estadÃ­sticas, anÃ¡lisis)
- EnvÃ­o de notificaciones masivas
- IntegraciÃ³n con sistemas externos
- Event sourcing y auditorÃ­a

## RecomendaciÃ³n para Iceplay

Arquitectura hÃ­brida recomendada:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Live Logger    â”‚
â”‚   (Admin)       â”‚â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                      â”‚ WebSocket
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ (tiempo real)
â”‚  Match Viewer   â”‚â”€â”€â”€â”¼â”€â”€â–º Backend â”€â”€â–º WebSocket Server
â”‚   (PÃºblico)     â”‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                      â”‚
                      â”‚ Kafka/RabbitMQ
                      â”‚ (procesamiento asÃ­ncrono)
                      â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Analytics     â”‚
              â”‚ Notifications â”‚
              â”‚ Statistics    â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ImplementaciÃ³n sugerida

1. WebSockets para tiempo real:
   - Sincronizar eventos entre usuarios
   - Actualizar cronÃ³metro en vivo
   - Notificaciones instantÃ¡neas

2. Colas (opcional, para escalar):
   - Procesar estadÃ­sticas despuÃ©s del partido
   - Enviar notificaciones push masivas
   - Generar reportes y anÃ¡lisis

Â¿Quieres que implemente WebSockets en Angular para sincronizar el Live Match Logger en tiempo real? Puedo crear un servicio de WebSocket que:
- Sincronice eventos entre mÃºltiples usuarios
- Actualice el cronÃ³metro en tiempo real
- Maneje reconexiones automÃ¡ticas
- Use signals para reactividad

Â¿Te parece bien esta aproximaciÃ³n o prefieres empezar con otra parte?

---

**User**

dame un diagrama mejor

---

**Cursor**

## Arquitectura de Tiempo Real para Iceplay

### Diagrama General del Sistema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    FRONTEND (Angular)                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚    ADMIN PANEL          â”‚          â”‚    ESPECTADORES         â”‚                    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚                    â”‚
â”‚  â”‚  â”‚ Live Match      â”‚    â”‚          â”‚  â”‚ Match Details   â”‚    â”‚                    â”‚
â”‚  â”‚  â”‚ Logger          â”‚    â”‚          â”‚  â”‚ (Vista PÃºblica) â”‚    â”‚                    â”‚
â”‚  â”‚  â”‚                 â”‚    â”‚          â”‚  â”‚                 â”‚    â”‚                    â”‚
â”‚  â”‚  â”‚ â€¢ Registrar     â”‚    â”‚          â”‚  â”‚ â€¢ Ver marcador  â”‚    â”‚                    â”‚
â”‚  â”‚  â”‚   eventos       â”‚    â”‚          â”‚  â”‚ â€¢ Ver eventos   â”‚    â”‚                    â”‚
â”‚  â”‚  â”‚ â€¢ Control timer â”‚    â”‚          â”‚  â”‚ â€¢ Tiempo real   â”‚    â”‚                    â”‚
â”‚  â”‚  â”‚ â€¢ GestiÃ³n       â”‚    â”‚          â”‚  â”‚                 â”‚    â”‚                    â”‚
â”‚  â”‚  â”‚   jugadores     â”‚    â”‚          â”‚  â”‚                 â”‚    â”‚                    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚              â”‚                                    â”‚                                   â”‚
â”‚              â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚              â”‚         â”‚   WebSocket Service      â”‚               â”‚                  â”‚
â”‚              â”‚         â”‚   (Angular Service)      â”‚               â”‚                  â”‚
â”‚              â”‚         â”‚                          â”‚               â”‚                  â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â€¢ ConexiÃ³n persistente  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                        â”‚  â€¢ ReconexiÃ³n automÃ¡tica â”‚                                  â”‚
â”‚                        â”‚  â€¢ Signals reactivos     â”‚                                  â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                                     â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â”‚ WebSocket (wss://)
                                      â”‚ Bidireccional
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    BACKEND                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                         WebSocket Gateway                                       â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚ â”‚
â”‚  â”‚  â”‚ Room: Match_001 â”‚  â”‚ Room: Match_002 â”‚  â”‚ Room: Match_003 â”‚                 â”‚ â”‚
â”‚  â”‚  â”‚ ğŸ‘¤ Admin        â”‚  â”‚ ğŸ‘¤ Admin        â”‚  â”‚ ğŸ‘¤ Admin        â”‚                 â”‚ â”‚
â”‚  â”‚  â”‚ ğŸ‘¥ 150 viewers  â”‚  â”‚ ğŸ‘¥ 45 viewers   â”‚  â”‚ ğŸ‘¥ 200 viewers  â”‚                 â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚                                                â”‚
â”‚                                     â–¼                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                              REST API                                            â”‚â”‚
â”‚  â”‚                                                                                  â”‚â”‚
â”‚  â”‚  POST /matches/:id/events    â†’  Crear evento                                    â”‚â”‚
â”‚  â”‚  PATCH /matches/:id          â†’  Actualizar partido                              â”‚â”‚
â”‚  â”‚  GET /matches/:id            â†’  Obtener partido                                 â”‚â”‚
â”‚  â”‚                                                                                  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                     â”‚                                                â”‚
â”‚                                     â–¼                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                           DATABASE                                               â”‚â”‚
â”‚  â”‚                                                                                  â”‚â”‚
â”‚  â”‚   matches    â”‚    events    â”‚    teams    â”‚    players                          â”‚â”‚
â”‚  â”‚                                                                                  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Flujo de Eventos en Tiempo Real

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           FLUJO DE UN GOL EN TIEMPO REAL                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    ADMIN                    BACKEND                         ESPECTADORES
      â”‚                         â”‚                                  â”‚
      â”‚  1. Click "Goal"        â”‚                                  â”‚
      â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                                  â”‚
      â”‚   WS: match:event       â”‚                                  â”‚
      â”‚   {type: 'goal',        â”‚                                  â”‚
      â”‚    player: 'Salah',     â”‚                                  â”‚
      â”‚    minute: 45}          â”‚                                  â”‚
      â”‚                         â”‚                                  â”‚
      â”‚                         â”‚  2. Validar + Guardar en DB      â”‚
      â”‚                         â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>      â”‚
      â”‚                         â”‚                                  â”‚
      â”‚                         â”‚  3. Broadcast a Room             â”‚
      â”‚                         â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>
      â”‚                         â”‚    WS: match:updated             â”‚
      â”‚                         â”‚    {score: {home: 1, away: 0},   â”‚
      â”‚                         â”‚     event: {...}}                â”‚
      â”‚                         â”‚                                  â”‚
      â”‚  4. ConfirmaciÃ³n        â”‚                                  â”‚  5. UI Update
      â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                                  â”‚     instantÃ¡neo
      â”‚   WS: event:confirmed   â”‚                                  â”‚     (~50-100ms)
      â”‚                         â”‚                                  â”‚
      â–¼                         â–¼                                  â–¼

   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Score:  â”‚            â”‚ Event   â”‚                      â”‚  Score:     â”‚
   â”‚ 1 - 0   â”‚            â”‚ saved   â”‚                      â”‚  1 - 0  âš½  â”‚
   â”‚ âœ“       â”‚            â”‚ âœ“       â”‚                      â”‚  Goal!      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Estructura de Mensajes WebSocket

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              TIPOS DE MENSAJES                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚  CLIENTE â†’ SERVIDOR                                                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                   â”‚
â”‚                                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ JOIN ROOM (Suscribirse a un partido)                                        â”‚    â”‚
â”‚  â”‚                                                                              â”‚    â”‚
â”‚  â”‚  {                                                                           â”‚    â”‚
â”‚  â”‚    "event": "match:join",                                                    â”‚    â”‚
â”‚  â”‚    "data": { "matchId": "match_001" }                                        â”‚    â”‚
â”‚  â”‚  }                                                                           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ NEW EVENT (Admin registra evento)                                           â”‚    â”‚
â”‚  â”‚                                                                              â”‚    â”‚
â”‚  â”‚  {                                                                           â”‚    â”‚
â”‚  â”‚    "event": "match:event",                                                   â”‚    â”‚
â”‚  â”‚    "data": {                                                                 â”‚    â”‚
â”‚  â”‚      "matchId": "match_001",                                                 â”‚    â”‚
â”‚  â”‚      "type": "goal",                                                         â”‚    â”‚
â”‚  â”‚      "playerId": "player_10",                                                â”‚    â”‚
â”‚  â”‚      "teamId": "team_home",                                                  â”‚    â”‚
â”‚  â”‚      "minute": 45                                                            â”‚    â”‚
â”‚  â”‚    }                                                                         â”‚    â”‚
â”‚  â”‚  }                                                                           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ TIMER UPDATE (Admin actualiza cronÃ³metro)                                   â”‚    â”‚
â”‚  â”‚                                                                              â”‚    â”‚
â”‚  â”‚  {                                                                           â”‚    â”‚
â”‚  â”‚    "event": "match:timer",                                                   â”‚    â”‚
â”‚  â”‚    "data": {                                                                 â”‚    â”‚
â”‚  â”‚      "matchId": "match_001",                                                 â”‚    â”‚
â”‚  â”‚      "elapsedSeconds": 2700,                                                 â”‚    â”‚
â”‚  â”‚      "isRunning": true                                                       â”‚    â”‚
â”‚  â”‚    }                                                                         â”‚    â”‚
â”‚  â”‚  }                                                                           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                      â”‚
â”‚  SERVIDOR â†’ CLIENTE                                                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                   â”‚
â”‚                                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ MATCH STATE (Estado completo al conectarse)                                 â”‚    â”‚
â”‚  â”‚                                                                              â”‚    â”‚
â”‚  â”‚  {                                                                           â”‚    â”‚
â”‚  â”‚    "event": "match:state",                                                   â”‚    â”‚
â”‚  â”‚    "data": {                                                                 â”‚    â”‚
â”‚  â”‚      "match": {...},                                                         â”‚    â”‚
â”‚  â”‚      "events": [...],                                                        â”‚    â”‚
â”‚  â”‚      "timer": { "elapsed": 2700, "isRunning": true }                         â”‚    â”‚
â”‚  â”‚    }                                                                         â”‚    â”‚
â”‚  â”‚  }                                                                           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ MATCH UPDATED (Broadcast a todos en la room)                                â”‚    â”‚
â”‚  â”‚                                                                              â”‚    â”‚
â”‚  â”‚  {                                                                           â”‚    â”‚
â”‚  â”‚    "event": "match:updated",                                                 â”‚    â”‚
â”‚  â”‚    "data": {                                                                 â”‚    â”‚
â”‚  â”‚      "homeScore": 2,                                                         â”‚    â”‚
â”‚  â”‚      "awayScore": 1,                                                         â”‚    â”‚
â”‚  â”‚      "newEvent": {                                                           â”‚    â”‚
â”‚  â”‚        "type": "goal",                                                       â”‚    â”‚
â”‚  â”‚        "player": "M. Salah",                                                 â”‚    â”‚
â”‚  â”‚        "minute": 78                                                          â”‚    â”‚
â”‚  â”‚      }                                                                       â”‚    â”‚
â”‚  â”‚    }                                                                         â”‚    â”‚
â”‚  â”‚  }                                                                           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### ComparaciÃ³n de TecnologÃ­as

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     WebSocket vs Kafka/RabbitMQ vs Polling                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚                 â”‚  WebSocket        â”‚  Kafka/RabbitMQ   â”‚  HTTP Polling             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  Latencia       â”‚  ~50-100ms âœ…     â”‚  ~200-500ms       â”‚  ~3000ms (tu actual) âŒ   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  Bidireccional  â”‚  âœ… SÃ­            â”‚  âŒ No            â”‚  âŒ No                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  ConexiÃ³n       â”‚  Persistente      â”‚  Consumidores     â”‚  Nueva cada request       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  Complejidad    â”‚  Media            â”‚  Alta             â”‚  Baja                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  Escalabilidad  â”‚  Buena            â”‚  Excelente        â”‚  Limitada                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  Uso ideal      â”‚  Real-time UI     â”‚  Microservicios   â”‚  Datos no crÃ­ticos        â”‚
â”‚                 â”‚  Live sports âœ…   â”‚  Analytics        â”‚                           â”‚
â”‚                 â”‚  Chat             â”‚  Event sourcing   â”‚                           â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

RECOMENDACIÃ“N PARA ICEPLAY:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  ğŸ¯ WebSocket para comunicaciÃ³n en tiempo real            â”‚
   â”‚     â€¢ Live Match Logger â†” Espectadores                    â”‚
   â”‚     â€¢ SincronizaciÃ³n de timer                             â”‚
   â”‚     â€¢ Eventos del partido                                  â”‚
   â”‚                                                            â”‚
   â”‚  ğŸ“Š Kafka/RabbitMQ (opcional, fase 2)                     â”‚
   â”‚     â€¢ Procesamiento de estadÃ­sticas post-partido          â”‚
   â”‚     â€¢ Notificaciones push masivas                         â”‚
   â”‚     â€¢ IntegraciÃ³n con sistemas externos                   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Stack TecnolÃ³gico Recomendado

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              STACK RECOMENDADO                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   FRONTEND (Angular 21)                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                              â”‚
â”‚   â€¢ ngx-socket-io  o  rxjs-websockets                                               â”‚
â”‚   â€¢ Signals para estado reactivo                                                    â”‚
â”‚                                                                                      â”‚
â”‚   BACKEND (Opciones)                                                                 â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚   â”‚    NestJS        â”‚  â”‚    Node.js       â”‚  â”‚    .NET Core     â”‚                  â”‚
â”‚   â”‚    + Socket.io   â”‚  â”‚    + ws          â”‚  â”‚    + SignalR     â”‚                  â”‚
â”‚   â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚                  â”‚
â”‚   â”‚  â­ Recomendado  â”‚  â”‚  MÃ¡s ligero      â”‚  â”‚  Si ya usan .NET â”‚                  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                                                      â”‚
â”‚   INFRAESTRUCTURA                                                                    â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                    â”‚
â”‚   â€¢ Redis (para pub/sub entre instancias del servidor)                              â”‚
â”‚   â€¢ PostgreSQL / MongoDB (persistencia)                                             â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

Â¿Quieres que profundice en alguna parte especÃ­fica o que te muestre cÃ³mo serÃ­a la implementaciÃ³n del servicio WebSocket en Angular?

---

**User**

y como puego gestionar varios sockets ya que pueden haber personas en viendo varios partidos diferentes a la vez

---

**Cursor**

## GestiÃ³n de MÃºltiples Partidos con WebSocket Rooms

### Concepto: Rooms (Salas)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ARQUITECTURA DE ROOMS                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   Cada partido = 1 Room                                                              â”‚
â”‚   Usuarios se suscriben solo a las rooms de los partidos que estÃ¡n viendo           â”‚
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                        WEBSOCKET SERVER                                      â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚   â”‚
â”‚   â”‚  â”‚ Room: match_001  â”‚  â”‚ Room: match_002  â”‚  â”‚ Room: match_003  â”‚           â”‚   â”‚
â”‚   â”‚  â”‚ (Man Utd vs Liv) â”‚  â”‚ (BarÃ§a vs Real)  â”‚  â”‚ (City vs Chelsea)â”‚           â”‚   â”‚
â”‚   â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚           â”‚   â”‚
â”‚   â”‚  â”‚  ğŸ‘¤ Admin        â”‚  â”‚  ğŸ‘¤ Admin        â”‚  â”‚  ğŸ‘¤ Admin        â”‚           â”‚   â”‚
â”‚   â”‚  â”‚  ğŸ‘¥ User_A       â”‚  â”‚  ğŸ‘¥ User_B       â”‚  â”‚  ğŸ‘¥ User_A â†â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”       â”‚   â”‚
â”‚   â”‚  â”‚  ğŸ‘¥ User_C       â”‚  â”‚  ğŸ‘¥ User_D       â”‚  â”‚  ğŸ‘¥ User_E       â”‚   â”‚       â”‚   â”‚
â”‚   â”‚  â”‚  ğŸ‘¥ User_D â†â”€â”€â”€â”€â”€â”¼â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”    â”‚   â”‚
â”‚   â”‚  â”‚  ...150 mÃ¡s      â”‚  â”‚  ...80 mÃ¡s       â”‚  â”‚  ...200 mÃ¡s      â”‚   â”‚  â”‚    â”‚   â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚    â”‚   â”‚
â”‚   â”‚                                                                      â”‚  â”‚    â”‚   â”‚
â”‚   â”‚         User_A estÃ¡ en 2 rooms (match_001 y match_003) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚   â”‚
â”‚   â”‚         User_D estÃ¡ en 2 rooms (match_001 y match_002) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Flujo de SuscripciÃ³n a MÃºltiples Partidos

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              USUARIO VIENDO 2 PARTIDOS SIMULTÃNEAMENTE                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   FRONTEND (User_A)                                  SERVIDOR                        â”‚
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚
â”‚   â”‚  Browser Tab / Pantalla         â”‚                                               â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚                                               â”‚
â”‚   â”‚  â”‚ Match 001  â”‚ Match 003  â”‚    â”‚     1. ConexiÃ³n WebSocket Ãºnica               â”‚
â”‚   â”‚  â”‚ Utd vs Liv â”‚ City vs Cheâ”‚    â”‚     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•              â”‚
â”‚   â”‚  â”‚            â”‚            â”‚    â”‚                                               â”‚
â”‚   â”‚  â”‚  2-1  45'  â”‚  0-0  23'  â”‚    â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚         â”‚                  â”‚                  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚   WS Connection  â”‚                  â”‚
â”‚                     â”‚                          â”‚   (socket_id:    â”‚                  â”‚
â”‚                     â”‚                          â”‚    user_A_xyz)   â”‚                  â”‚
â”‚                     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚                  â”‚
â”‚                     â”‚  1 solo WebSocket        â”‚                  â”‚                  â”‚
â”‚                     â”‚  (NO mÃºltiples)          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                     â”‚                                   â”‚                            â”‚
â”‚                     â”‚                                   â–¼                            â”‚
â”‚                     â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚   2. Join Room 001  â”‚                          â”‚  Room Manager    â”‚                  â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚                          â”‚                  â”‚                  â”‚
â”‚                     â”‚  {event: "join",         â”‚  rooms = {       â”‚                  â”‚
â”‚                     â”‚   matchId: "001"}        â”‚    match_001: [  â”‚                  â”‚
â”‚                     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚      user_A,     â”‚                  â”‚
â”‚                     â”‚                          â”‚      user_C,     â”‚                  â”‚
â”‚                     â”‚                          â”‚      ...         â”‚                  â”‚
â”‚   3. Join Room 003  â”‚                          â”‚    ],            â”‚                  â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚                          â”‚    match_003: [  â”‚                  â”‚
â”‚                     â”‚  {event: "join",         â”‚      user_A, â†â”€â”€â”€â”¼â”€â”€ mismo user     â”‚
â”‚                     â”‚   matchId: "003"}        â”‚      user_E,     â”‚                  â”‚
â”‚                     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚      ...         â”‚                  â”‚
â”‚                     â”‚                          â”‚    ]             â”‚                  â”‚
â”‚                     â”‚                          â”‚  }               â”‚                  â”‚
â”‚                     â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                     â”‚                                                                â”‚
â”‚   4. Recibe eventos de AMBOS partidos                                               â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                               â”‚
â”‚                     â”‚                                                                â”‚
â”‚                     â”‚  match_001:updated                                             â”‚
â”‚                     â”‚  {score: {home: 2, away: 1}}                                   â”‚
â”‚                     â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                      â”‚
â”‚                     â”‚                                                                â”‚
â”‚                     â”‚  match_003:updated                                             â”‚
â”‚                     â”‚  {score: {home: 0, away: 1}}                                   â”‚
â”‚                     â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                      â”‚
â”‚                     â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Arquitectura del Servicio en Angular

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ANGULAR - WEBSOCKET SERVICE ARCHITECTURE                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                         WebSocketService (Singleton)                         â”‚   â”‚
â”‚   â”‚                         providedIn: 'root'                                   â”‚   â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚   â”‚  â”‚                                                                        â”‚  â”‚   â”‚
â”‚   â”‚  â”‚   socket: WebSocket | null           // 1 conexiÃ³n Ãºnica              â”‚  â”‚   â”‚
â”‚   â”‚  â”‚   isConnected = signal(false)                                         â”‚  â”‚   â”‚
â”‚   â”‚  â”‚   subscribedMatches = signal<Set<string>>()  // IDs de partidos       â”‚  â”‚   â”‚
â”‚   â”‚  â”‚                                                                        â”‚  â”‚   â”‚
â”‚   â”‚  â”‚   // Subjects por tipo de evento                                       â”‚  â”‚   â”‚
â”‚   â”‚  â”‚   matchUpdates$ = new Subject<MatchUpdate>()                          â”‚  â”‚   â”‚
â”‚   â”‚  â”‚   timerUpdates$ = new Subject<TimerUpdate>()                          â”‚  â”‚   â”‚
â”‚   â”‚  â”‚   eventUpdates$ = new Subject<EventUpdate>()                          â”‚  â”‚   â”‚
â”‚   â”‚  â”‚                                                                        â”‚  â”‚   â”‚
â”‚   â”‚  â”‚   connect()              // Conectar al servidor                       â”‚  â”‚   â”‚
â”‚   â”‚  â”‚   disconnect()           // Desconectar                                â”‚  â”‚   â”‚
â”‚   â”‚  â”‚   joinMatch(matchId)     // Unirse a room                             â”‚  â”‚   â”‚
â”‚   â”‚  â”‚   leaveMatch(matchId)    // Salir de room                             â”‚  â”‚   â”‚
â”‚   â”‚  â”‚   sendEvent(matchId, event)  // Admin: enviar evento                  â”‚  â”‚   â”‚
â”‚   â”‚  â”‚                                                                        â”‚  â”‚   â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                          â”‚                                           â”‚
â”‚                                          â”‚ inject()                                  â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚                    â”‚                     â”‚                     â”‚                    â”‚
â”‚                    â–¼                     â–¼                     â–¼                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚   MatchDetailsPage     â”‚ â”‚   LiveMatchLogger      â”‚ â”‚   MatchesListPage      â”‚ â”‚
â”‚   â”‚                        â”‚ â”‚                        â”‚ â”‚                        â”‚ â”‚
â”‚   â”‚ ngOnInit() {           â”‚ â”‚ ngOnInit() {           â”‚ â”‚ // Puede mostrar       â”‚ â”‚
â”‚   â”‚   ws.joinMatch(id);    â”‚ â”‚   ws.joinMatch(id);    â”‚ â”‚ // mÃºltiples partidos  â”‚ â”‚
â”‚   â”‚ }                      â”‚ â”‚ }                      â”‚ â”‚ // en vivo             â”‚ â”‚
â”‚   â”‚                        â”‚ â”‚                        â”‚ â”‚                        â”‚ â”‚
â”‚   â”‚ ngOnDestroy() {        â”‚ â”‚ sendGoal() {           â”‚ â”‚ liveMatches.forEach(   â”‚ â”‚
â”‚   â”‚   ws.leaveMatch(id);   â”‚ â”‚   ws.sendEvent(id, {   â”‚ â”‚   m => ws.joinMatch(m) â”‚ â”‚
â”‚   â”‚ }                      â”‚ â”‚     type: 'goal'...    â”‚ â”‚ )                      â”‚ â”‚
â”‚   â”‚                        â”‚ â”‚   });                  â”‚ â”‚                        â”‚ â”‚
â”‚   â”‚ // Escucha updates     â”‚ â”‚ }                      â”‚ â”‚                        â”‚ â”‚
â”‚   â”‚ ws.matchUpdates$       â”‚ â”‚                        â”‚ â”‚                        â”‚ â”‚
â”‚   â”‚   .pipe(               â”‚ â”‚                        â”‚ â”‚                        â”‚ â”‚
â”‚   â”‚     filter(u =>        â”‚ â”‚                        â”‚ â”‚                        â”‚ â”‚
â”‚   â”‚       u.matchId === id)â”‚ â”‚                        â”‚ â”‚                        â”‚ â”‚
â”‚   â”‚   )                    â”‚ â”‚                        â”‚ â”‚                        â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Manejo de Eventos por Partido (Filtrado)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CÃ“MO FILTRAR EVENTOS POR PARTIDO                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   El servidor envÃ­a TODOS los eventos de rooms suscritas                            â”‚
â”‚   El cliente filtra por matchId                                                      â”‚
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  WebSocket Server                                                            â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚   // Cuando hay un gol en match_001                                         â”‚   â”‚
â”‚   â”‚   io.to('match_001').emit('match:updated', {                                â”‚   â”‚
â”‚   â”‚     matchId: 'match_001',  â—„â”€â”€ Siempre incluir el matchId                   â”‚   â”‚
â”‚   â”‚     type: 'goal',                                                            â”‚   â”‚
â”‚   â”‚     data: { player: 'Salah', minute: 45 }                                   â”‚   â”‚
â”‚   â”‚   });                                                                        â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                           â”‚                                          â”‚
â”‚                                           â”‚ broadcast                                â”‚
â”‚                                           â–¼                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  Angular Component (viendo match_001)                                        â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚   private matchId = 'match_001';                                            â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚   constructor() {                                                            â”‚   â”‚
â”‚   â”‚     this.ws.matchUpdates$.pipe(                                             â”‚   â”‚
â”‚   â”‚       filter(update => update.matchId === this.matchId), â—„â”€â”€ Filtro         â”‚   â”‚
â”‚   â”‚       takeUntilDestroyed()                                                  â”‚   â”‚
â”‚   â”‚     ).subscribe(update => {                                                 â”‚   â”‚
â”‚   â”‚       this.handleUpdate(update);                                            â”‚   â”‚
â”‚   â”‚     });                                                                      â”‚   â”‚
â”‚   â”‚   }                                                                          â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â”‚   ALTERNATIVA: Usar Signals con computed                                            â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                           â”‚
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚   // En el WebSocketService                                                 â”‚   â”‚
â”‚   â”‚   private _matchStates = signal<Map<string, MatchState>>(new Map());        â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚   // Obtener estado de un partido especÃ­fico                                â”‚   â”‚
â”‚   â”‚   getMatchState(matchId: string) {                                          â”‚   â”‚
â”‚   â”‚     return computed(() => this._matchStates().get(matchId));                â”‚   â”‚
â”‚   â”‚   }                                                                          â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚   // En el componente                                                        â”‚   â”‚
â”‚   â”‚   matchState = this.ws.getMatchState(this.matchId);                         â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚   // En el template                                                          â”‚   â”‚
â”‚   â”‚   <div>Score: {{ matchState()?.homeScore }} - {{ matchState()?.awayScore }}</div>â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Ciclo de Vida: Join/Leave Rooms

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CICLO DE VIDA DE SUSCRIPCIONES                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   ESCENARIO: Usuario navega entre pÃ¡ginas                                           â”‚
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  PÃ¡gina: /matches (Lista de partidos en vivo)                               â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚  ngOnInit() {                                                                â”‚   â”‚
â”‚   â”‚    this.liveMatchIds = ['001', '002', '003'];                               â”‚   â”‚
â”‚   â”‚    this.liveMatchIds.forEach(id => this.ws.joinMatch(id));                  â”‚   â”‚
â”‚   â”‚  }                              â–²                                            â”‚   â”‚
â”‚   â”‚                                 â”‚                                            â”‚   â”‚
â”‚   â”‚  ngOnDestroy() {                â”‚  Suscrito a: [001, 002, 003]              â”‚   â”‚
â”‚   â”‚    this.liveMatchIds.forEach(id => this.ws.leaveMatch(id));                 â”‚   â”‚
â”‚   â”‚  }                                                                           â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                           â”‚                                          â”‚
â”‚                                           â”‚ Usuario hace click en partido 001       â”‚
â”‚                                           â–¼                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  PÃ¡gina: /match/001 (Detalle de partido)                                    â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚  ngOnInit() {                                                                â”‚   â”‚
â”‚   â”‚    this.ws.joinMatch('001');    // Ya puede estar suscrito, no pasa nada    â”‚   â”‚
â”‚   â”‚  }                              â–²                                            â”‚   â”‚
â”‚   â”‚                                 â”‚                                            â”‚   â”‚
â”‚   â”‚  ngOnDestroy() {                â”‚  Suscrito a: [001]                        â”‚   â”‚
â”‚   â”‚    this.ws.leaveMatch('001');                                               â”‚   â”‚
â”‚   â”‚  }                                                                           â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                           â”‚                                          â”‚
â”‚                                           â”‚ Usuario abre segundo tab                 â”‚
â”‚                                           â–¼                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  Tab 2: /match/003                                                          â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚  // NUEVA conexiÃ³n WebSocket (cada tab tiene su propia conexiÃ³n)            â”‚   â”‚
â”‚   â”‚  // El servidor maneja mÃºltiples conexiones del mismo usuario               â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚  Tab 1: socket_abc123 â†’ Room: match_001                                     â”‚   â”‚
â”‚   â”‚  Tab 2: socket_xyz789 â†’ Room: match_003                                     â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Backend: Estructura de Rooms (Socket.io/NestJS)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      BACKEND - GESTIÃ“N DE ROOMS                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   // NestJS Gateway con Socket.io                                                   â”‚
â”‚                                                                                      â”‚
â”‚   @WebSocketGateway({ cors: true })                                                 â”‚
â”‚   export class MatchGateway {                                                       â”‚
â”‚                                                                                      â”‚
â”‚     // Cliente se une a una room                                                    â”‚
â”‚     @SubscribeMessage('match:join')                                                 â”‚
â”‚     handleJoin(client: Socket, payload: { matchId: string }) {                     â”‚
â”‚       client.join(`match_${payload.matchId}`);  // â—„â”€â”€ Socket.io rooms             â”‚
â”‚       // Enviar estado actual del partido                                           â”‚
â”‚       const state = this.matchService.getMatchState(payload.matchId);              â”‚
â”‚       client.emit('match:state', state);                                           â”‚
â”‚     }                                                                               â”‚
â”‚                                                                                      â”‚
â”‚     // Cliente sale de una room                                                     â”‚
â”‚     @SubscribeMessage('match:leave')                                                â”‚
â”‚     handleLeave(client: Socket, payload: { matchId: string }) {                    â”‚
â”‚       client.leave(`match_${payload.matchId}`);                                    â”‚
â”‚     }                                                                               â”‚
â”‚                                                                                      â”‚
â”‚     // Admin envÃ­a un evento (gol, tarjeta, etc.)                                  â”‚
â”‚     @SubscribeMessage('match:event')                                                â”‚
â”‚     async handleEvent(client: Socket, payload: MatchEventDto) {                    â”‚
â”‚       // 1. Validar que es admin                                                    â”‚
â”‚       // 2. Guardar en DB                                                           â”‚
â”‚       // 3. Broadcast a TODOS en la room                                           â”‚
â”‚       this.server                                                                   â”‚
â”‚         .to(`match_${payload.matchId}`)                                            â”‚
â”‚         .emit('match:updated', {                                                    â”‚
â”‚           matchId: payload.matchId,                                                â”‚
â”‚           event: payload,                                                           â”‚
â”‚           newScore: { home: 2, away: 1 }                                           â”‚
â”‚         });                                                                         â”‚
â”‚     }                                                                               â”‚
â”‚                                                                                      â”‚
â”‚   }                                                                                  â”‚
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  ESTRUCTURA DE ROOMS EN MEMORIA                                              â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚   server.sockets.adapter.rooms = Map {                                       â”‚   â”‚
â”‚   â”‚     'match_001' => Set { socket_abc, socket_def, socket_ghi, ... },         â”‚   â”‚
â”‚   â”‚     'match_002' => Set { socket_jkl, socket_mno, ... },                     â”‚   â”‚
â”‚   â”‚     'match_003' => Set { socket_abc, socket_pqr, ... },  // abc en 2 rooms  â”‚   â”‚
â”‚   â”‚   }                                                                          â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Escalabilidad: MÃºltiples Servidores

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ESCALANDO CON REDIS (MÃºltiples instancias del servidor)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   Problema: Con mÃºltiples servidores, las rooms son locales a cada servidor         â”‚
â”‚   SoluciÃ³n: Redis Pub/Sub como adapter                                              â”‚
â”‚                                                                                      â”‚
â”‚                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚                           â”‚  Load Balancer  â”‚                                       â”‚
â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚                    â”‚               â”‚               â”‚                                â”‚
â”‚                    â–¼               â–¼               â–¼                                â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚            â”‚  Server 1  â”‚  â”‚  Server 2  â”‚  â”‚  Server 3  â”‚                          â”‚
â”‚            â”‚            â”‚  â”‚            â”‚  â”‚            â”‚                          â”‚
â”‚            â”‚ Room: 001  â”‚  â”‚ Room: 001  â”‚  â”‚ Room: 002  â”‚                          â”‚
â”‚            â”‚ Users: A,B â”‚  â”‚ Users: C,D â”‚  â”‚ Users: E,F â”‚                          â”‚
â”‚            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                  â”‚               â”‚               â”‚                                  â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                                  â”‚                                                  â”‚
â”‚                                  â–¼                                                  â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚
â”‚                         â”‚     REDIS      â”‚                                          â”‚
â”‚                         â”‚    Pub/Sub     â”‚                                          â”‚
â”‚                         â”‚                â”‚                                          â”‚
â”‚                         â”‚ Sincroniza     â”‚                                          â”‚
â”‚                         â”‚ eventos entre  â”‚                                          â”‚
â”‚                         â”‚ servidores     â”‚                                          â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚
â”‚                                                                                      â”‚
â”‚   Cuando Server 1 recibe un gol para match_001:                                     â”‚
â”‚   1. Publica en Redis: "match_001:goal"                                             â”‚
â”‚   2. Server 2 tambiÃ©n tiene usuarios en match_001                                   â”‚
â”‚   3. Server 2 recibe el mensaje de Redis                                            â”‚
â”‚   4. Server 2 broadcast a sus usuarios locales en match_001                         â”‚
â”‚                                                                                      â”‚
â”‚   // Socket.io con Redis adapter                                                    â”‚
â”‚   import { createAdapter } from '@socket.io/redis-adapter';                         â”‚
â”‚   io.adapter(createAdapter(pubClient, subClient));                                  â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Resumen: Puntos Clave

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              RESUMEN                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   âœ…  1 CONEXIÃ“N WebSocket por cliente (no mÃºltiples)                               â”‚
â”‚                                                                                      â”‚
â”‚   âœ…  Rooms/Canales para separar partidos                                           â”‚
â”‚       - join('match_001') / leave('match_001')                                      â”‚
â”‚                                                                                      â”‚
â”‚   âœ…  Cada mensaje incluye matchId para filtrar en el cliente                       â”‚
â”‚                                                                                      â”‚
â”‚   âœ…  Join en ngOnInit(), Leave en ngOnDestroy()                                    â”‚
â”‚                                                                                      â”‚
â”‚   âœ…  El servidor usa broadcast a rooms especÃ­ficas                                 â”‚
â”‚       - io.to('match_001').emit(...)                                                â”‚
â”‚                                                                                      â”‚
â”‚   âœ…  Para escalar: Redis Pub/Sub como adapter                                      â”‚
â”‚                                                                                      â”‚
â”‚   âœ…  Socket.io maneja automÃ¡ticamente:                                             â”‚
â”‚       - ReconexiÃ³n                                                                  â”‚
â”‚       - Heartbeat                                                                   â”‚
â”‚       - Rooms                                                                       â”‚
â”‚       - Fallback a polling si WS no disponible                                      â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

Â¿Quieres que te muestre el cÃ³digo especÃ­fico del servicio WebSocket en Angular o el Gateway en NestJS para implementar esto?

---

**User**

y un solo servidor si puede con esto?

---

**Cursor**

## Â¿Un Solo Servidor Puede con Esto?

### Respuesta Corta: **SÃ, para la mayorÃ­a de casos**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CAPACIDAD DE UN SOLO SERVIDOR                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   Un servidor Node.js/NestJS tÃ­pico puede manejar:                                  â”‚
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚   ğŸ’» Servidor bÃ¡sico (2-4 CPU, 4GB RAM)                                     â”‚   â”‚
â”‚   â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                      â”‚   â”‚
â”‚   â”‚   â€¢ 10,000 - 50,000 conexiones WebSocket simultÃ¡neas                        â”‚   â”‚
â”‚   â”‚   â€¢ ~100 partidos en vivo al mismo tiempo                                   â”‚   â”‚
â”‚   â”‚   â€¢ ~500 usuarios por partido                                               â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚   ğŸ’» Servidor medio (4-8 CPU, 8-16GB RAM)                                   â”‚   â”‚
â”‚   â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                   â”‚   â”‚
â”‚   â”‚   â€¢ 50,000 - 100,000 conexiones simultÃ¡neas                                 â”‚   â”‚
â”‚   â”‚   â€¢ ~500 partidos en vivo                                                   â”‚   â”‚
â”‚   â”‚   â€¢ ~200 usuarios por partido                                               â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚   ğŸ’» Servidor potente (8+ CPU, 32GB+ RAM)                                   â”‚   â”‚
â”‚   â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                     â”‚   â”‚
â”‚   â”‚   â€¢ 100,000 - 500,000+ conexiones                                           â”‚   â”‚
â”‚   â”‚   â€¢ Miles de partidos simultÃ¡neos                                           â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â”‚   ğŸ“Š PARA ICEPLAY (Liga amateur/local):                                             â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                            â”‚
â”‚   â€¢ Probablemente: 5-20 partidos en vivo simultÃ¡neos                               â”‚
â”‚   â€¢ ~50-200 espectadores por partido                                               â”‚
â”‚   â€¢ Total: ~1,000-4,000 conexiones                                                 â”‚
â”‚   â€¢                                                                                 â”‚
â”‚   â€¢ âœ… UN SOLO SERVIDOR ES MÃS QUE SUFICIENTE                                      â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Por QuÃ© WebSocket es Eficiente

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      WEBSOCKET vs HTTP POLLING                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   HTTP POLLING (tu implementaciÃ³n actual)                                           â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                           â”‚
â”‚                                                                                      â”‚
â”‚   1,000 usuarios Ã— 1 request/3 segundos = 333 requests/segundo                      â”‚
â”‚   Cada request: conexiÃ³n TCP + headers + respuesta                                  â”‚
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”                                      â”‚
â”‚   â”‚ GET â”‚     â”‚ GET â”‚     â”‚ GET â”‚     â”‚ GET â”‚    ... cada 3 segundos               â”‚
â”‚   â””â”€â”€â”¬â”€â”€â”˜     â””â”€â”€â”¬â”€â”€â”˜     â””â”€â”€â”¬â”€â”€â”˜     â””â”€â”€â”¬â”€â”€â”˜                                      â”‚
â”‚      â”‚           â”‚           â”‚           â”‚                                          â”‚
â”‚      â–¼           â–¼           â–¼           â–¼                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚   â”‚            SERVIDOR                      â”‚  ğŸ˜° Procesando 333 req/s             â”‚
â”‚   â”‚                                          â”‚     aunque no haya cambios           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚                                                                                      â”‚
â”‚                                                                                      â”‚
â”‚   WEBSOCKET                                                                          â”‚
â”‚   â•â•â•â•â•â•â•â•â•                                                                          â”‚
â”‚                                                                                      â”‚
â”‚   1,000 usuarios = 1,000 conexiones persistentes (muy ligeras)                      â”‚
â”‚   Solo envÃ­a datos cuando HAY un evento real                                        â”‚
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”                                                  â”‚
â”‚   â”‚ ğŸ‘¤  â”‚ â”‚ ğŸ‘¤  â”‚ â”‚ ğŸ‘¤  â”‚ â”‚ ğŸ‘¤  â”‚    ... 1,000 conexiones abiertas                 â”‚
â”‚   â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜         (idle, casi sin CPU)                     â”‚
â”‚      â”‚       â”‚       â”‚       â”‚                                                      â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜                                                      â”‚
â”‚                  â”‚                                                                   â”‚
â”‚                  â–¼                                                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚   â”‚            SERVIDOR                      â”‚  ğŸ˜ Solo trabaja cuando              â”‚
â”‚   â”‚                                          â”‚     hay un GOL real                  â”‚
â”‚   â”‚    âš½ Gol! â†’ broadcast a 1,000 usuarios  â”‚     (~1 mensaje cada minutos)        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚                                                                                      â”‚
â”‚                                                                                      â”‚
â”‚   COMPARACIÃ“N DE RECURSOS                                                           â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                           â”‚
â”‚                                                                                      â”‚
â”‚   â”‚              â”‚  HTTP Polling   â”‚  WebSocket     â”‚                               â”‚
â”‚   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                               â”‚
â”‚   â”‚ CPU          â”‚  Alto (333/s)   â”‚  Muy bajo      â”‚                               â”‚
â”‚   â”‚ Bandwidth    â”‚  Alto           â”‚  MÃ­nimo        â”‚                               â”‚
â”‚   â”‚ Latencia     â”‚  3 segundos     â”‚  ~50ms         â”‚                               â”‚
â”‚   â”‚ Conexiones   â”‚  Nuevas c/3s    â”‚  Persistentes  â”‚                               â”‚
â”‚   â”‚ RAM/conexiÃ³n â”‚  N/A            â”‚  ~2-10 KB      â”‚                               â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### CÃ¡lculo de Recursos para Iceplay

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ESTIMACIÃ“N PARA ICEPLAY                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   ESCENARIO: Fin de semana con muchos partidos                                      â”‚
â”‚                                                                                      â”‚
â”‚   â€¢ 20 partidos en vivo simultÃ¡neos                                                 â”‚
â”‚   â€¢ 100 espectadores promedio por partido                                           â”‚
â”‚   â€¢ 20 admins (1 por partido)                                                       â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                         â”‚
â”‚   Total: 2,020 conexiones WebSocket                                                 â”‚
â”‚                                                                                      â”‚
â”‚                                                                                      â”‚
â”‚   RECURSOS NECESARIOS:                                                              â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                              â”‚
â”‚                                                                                      â”‚
â”‚   RAM:                                                                              â”‚
â”‚   â€¢ ~5-10 KB por conexiÃ³n WebSocket                                                 â”‚
â”‚   â€¢ 2,020 Ã— 10 KB = ~20 MB para conexiones                                          â”‚
â”‚   â€¢ + Estado de partidos en memoria: ~5 MB                                          â”‚
â”‚   â€¢ + Node.js base: ~100-200 MB                                                     â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                         â”‚
â”‚   Total RAM: ~250-300 MB  âœ… Muy poco                                               â”‚
â”‚                                                                                      â”‚
â”‚                                                                                      â”‚
â”‚   CPU:                                                                              â”‚
â”‚   â€¢ Eventos por partido: ~20/partido (goles, tarjetas, etc.)                        â”‚
â”‚   â€¢ 20 partidos Ã— 20 eventos = 400 eventos en 90 minutos                           â”‚
â”‚   â€¢ = ~0.07 eventos/segundo                                                         â”‚
â”‚   â€¢ Cada evento: broadcast a ~100 usuarios                                          â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                         â”‚
â”‚   Total CPU: PrÃ¡cticamente nada  âœ…                                                 â”‚
â”‚                                                                                      â”‚
â”‚                                                                                      â”‚
â”‚   SERVIDOR MÃNIMO RECOMENDADO:                                                      â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚   â”‚  â€¢ 1-2 vCPU                             â”‚                                       â”‚
â”‚   â”‚  â€¢ 1-2 GB RAM                           â”‚                                       â”‚
â”‚   â”‚  â€¢ ~$5-20/mes (DigitalOcean, Render)    â”‚                                       â”‚
â”‚   â”‚                                         â”‚                                       â”‚
â”‚   â”‚  Ejemplo: DigitalOcean Droplet $6/mes   â”‚                                       â”‚
â”‚   â”‚           Railway, Render, Fly.io       â”‚                                       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Â¿CuÃ¡ndo NecesitarÃ­as Escalar?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Â¿CUÃNDO ESCALAR A MÃšLTIPLES SERVIDORES?                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   UN SERVIDOR es suficiente hasta:                                                  â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                  â”‚
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚   âœ… < 50,000 conexiones simultÃ¡neas                                        â”‚   â”‚
â”‚   â”‚   âœ… < 1,000 partidos en vivo                                               â”‚   â”‚
â”‚   â”‚   âœ… Alta disponibilidad NO es crÃ­tica (si cae, cae)                        â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â”‚                                                                                      â”‚
â”‚   NECESITAS ESCALAR cuando:                                                         â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                        â”‚
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚   âš ï¸  > 50,000-100,000 conexiones                                           â”‚   â”‚
â”‚   â”‚   âš ï¸  Necesitas 99.9% uptime (alta disponibilidad)                          â”‚   â”‚
â”‚   â”‚   âš ï¸  El servidor actual se satura                                          â”‚   â”‚
â”‚   â”‚   âš ï¸  Partidos de alto perfil (miles de viewers por partido)               â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â”‚                                                                                      â”‚
â”‚   ROADMAP SUGERIDO PARA ICEPLAY:                                                    â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                    â”‚
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚   â”‚   FASE 1        â”‚      â”‚   FASE 2        â”‚      â”‚   FASE 3        â”‚            â”‚
â”‚   â”‚   MVP           â”‚ â”€â”€â”€â”€ â”‚   Crecimiento   â”‚ â”€â”€â”€â”€ â”‚   Escala        â”‚            â”‚
â”‚   â”‚                 â”‚      â”‚                 â”‚      â”‚                 â”‚            â”‚
â”‚   â”‚ â€¢ 1 servidor    â”‚      â”‚ â€¢ 1 servidor    â”‚      â”‚ â€¢ 2+ servidores â”‚            â”‚
â”‚   â”‚ â€¢ Sin Redis     â”‚      â”‚ â€¢ + Redis cache â”‚      â”‚ â€¢ + Redis PubSubâ”‚            â”‚
â”‚   â”‚ â€¢ ~1-5K users   â”‚      â”‚ â€¢ ~5-30K users  â”‚      â”‚ â€¢ ~30K+ users   â”‚            â”‚
â”‚   â”‚                 â”‚      â”‚                 â”‚      â”‚                 â”‚            â”‚
â”‚   â”‚ ğŸ‘‰ EMPIEZA AQUÃ â”‚      â”‚                 â”‚      â”‚                 â”‚            â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Arquitectura Simple para Empezar

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ARQUITECTURA FASE 1 (UN SERVIDOR)                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚   â”‚   Admin     â”‚    â”‚  Viewer 1   â”‚    â”‚  Viewer N   â”‚                            â”‚
â”‚   â”‚   Angular   â”‚    â”‚   Angular   â”‚    â”‚   Angular   â”‚                            â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚          â”‚                  â”‚                  â”‚                                    â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                             â”‚                                                       â”‚
â”‚                             â”‚ WebSocket (wss://)                                    â”‚
â”‚                             â–¼                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                                                                              â”‚  â”‚
â”‚   â”‚                    UN SOLO SERVIDOR                                          â”‚  â”‚
â”‚   â”‚                    (Node.js/NestJS)                                          â”‚  â”‚
â”‚   â”‚                                                                              â”‚  â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚  â”‚
â”‚   â”‚   â”‚  REST API       â”‚  â”‚  WebSocket      â”‚  â”‚  Socket.io      â”‚             â”‚  â”‚
â”‚   â”‚   â”‚  (json-server   â”‚  â”‚  Gateway        â”‚  â”‚  Rooms          â”‚             â”‚  â”‚
â”‚   â”‚   â”‚   o NestJS)     â”‚  â”‚                 â”‚  â”‚  (en memoria)   â”‚             â”‚  â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚  â”‚
â”‚   â”‚            â”‚                    â”‚                                            â”‚  â”‚
â”‚   â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚  â”‚
â”‚   â”‚                       â”‚                                                      â”‚  â”‚
â”‚   â”‚                       â–¼                                                      â”‚  â”‚
â”‚   â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚  â”‚
â”‚   â”‚            â”‚    PostgreSQL /     â”‚                                           â”‚  â”‚
â”‚   â”‚            â”‚    SQLite / JSON    â”‚                                           â”‚  â”‚
â”‚   â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚  â”‚
â”‚   â”‚                                                                              â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                      â”‚
â”‚   ğŸ’° Costo: ~$5-20/mes                                                              â”‚
â”‚   ğŸ“Š Capacidad: ~2,000-10,000 usuarios simultÃ¡neos                                 â”‚
â”‚   ğŸš€ Complejidad: Baja                                                              â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Resumen

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              CONCLUSIÃ“N                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   âœ… SÃ, un solo servidor puede manejar Iceplay perfectamente                       â”‚
â”‚                                                                                      â”‚
â”‚   âœ… WebSocket es MUY eficiente (miles de conexiones con pocos recursos)            â”‚
â”‚                                                                                      â”‚
â”‚   âœ… No necesitas Kafka/RabbitMQ/Redis al inicio                                    â”‚
â”‚                                                                                      â”‚
â”‚   âœ… Empieza simple, escala cuando sea necesario                                    â”‚
â”‚                                                                                      â”‚
â”‚   âœ… Un VPS de $5-10/mes es suficiente para empezar                                 â”‚
â”‚                                                                                      â”‚
â”‚                                                                                      â”‚
â”‚   ğŸ¯ RECOMENDACIÃ“N:                                                                 â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                                  â”‚
â”‚   Implementa WebSockets con Socket.io en un solo servidor.                          â”‚
â”‚   Cuando tengas 10,000+ usuarios concurrentes, entonces piensa en escalar.          â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

Â¿Tienes mÃ¡s preguntas sobre la arquitectura o quieres que te explique cÃ³mo implementar el WebSocket service en Angular?

---

**User**

y se podria hacer con express?

---

**Cursor**

## SÃ­, Express + Socket.io es una Excelente OpciÃ³n

Es mÃ¡s simple que NestJS y perfecto para empezar.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    EXPRESS vs NESTJS para WebSockets                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   â”‚                  â”‚  Express + Socket.io    â”‚  NestJS + Socket.io  â”‚             â”‚
â”‚   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚             â”‚
â”‚   â”‚ Complejidad      â”‚  â­ Baja                â”‚  Media-Alta          â”‚             â”‚
â”‚   â”‚ Setup            â”‚  ~10 minutos            â”‚  ~30 minutos         â”‚             â”‚
â”‚   â”‚ LÃ­neas de cÃ³digo â”‚  ~50-100 lÃ­neas         â”‚  ~150-300 lÃ­neas     â”‚             â”‚
â”‚   â”‚ Curva aprendizajeâ”‚  FÃ¡cil                  â”‚  MÃ¡s pronunciada     â”‚             â”‚
â”‚   â”‚ Tipado           â”‚  Manual (TS opcional)   â”‚  Fuerte con TS       â”‚             â”‚
â”‚   â”‚ Estructura       â”‚  Flexible               â”‚  Opinada/RÃ­gida      â”‚             â”‚
â”‚   â”‚ Escalabilidad    â”‚  Igual                  â”‚  Igual               â”‚             â”‚
â”‚   â”‚ Performance      â”‚  Igual                  â”‚  Igual               â”‚             â”‚
â”‚   â”‚                  â”‚                         â”‚                      â”‚             â”‚
â”‚   â”‚ IDEAL PARA       â”‚  MVP, proyectos        â”‚  Proyectos grandes,  â”‚             â”‚
â”‚   â”‚                  â”‚  pequeÃ±os/medianos      â”‚  equipos grandes     â”‚             â”‚
â”‚   â”‚                  â”‚                         â”‚                      â”‚             â”‚
â”‚   â”‚                  â”‚  ğŸ‘‰ RECOMENDADO PARA    â”‚                      â”‚             â”‚
â”‚   â”‚                  â”‚     ICEPLAY             â”‚                      â”‚             â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Arquitectura con Express

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ARQUITECTURA EXPRESS + SOCKET.IO                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                         SERVIDOR EXPRESS                                     â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚   server.js                                                                  â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚   â”‚   â”‚                                                                       â”‚  â”‚   â”‚
â”‚   â”‚   â”‚  const express = require('express');                                  â”‚  â”‚   â”‚
â”‚   â”‚   â”‚  const { createServer } = require('http');                            â”‚  â”‚   â”‚
â”‚   â”‚   â”‚  const { Server } = require('socket.io');                             â”‚  â”‚   â”‚
â”‚   â”‚   â”‚                                                                       â”‚  â”‚   â”‚
â”‚   â”‚   â”‚  const app = express();                                               â”‚  â”‚   â”‚
â”‚   â”‚   â”‚  const httpServer = createServer(app);                                â”‚  â”‚   â”‚
â”‚   â”‚   â”‚  const io = new Server(httpServer, { cors: { origin: '*' } });        â”‚  â”‚   â”‚
â”‚   â”‚   â”‚                                                                       â”‚  â”‚   â”‚
â”‚   â”‚   â”‚  // REST API (Express)          // WebSocket (Socket.io)             â”‚  â”‚   â”‚
â”‚   â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚  â”‚   â”‚
â”‚   â”‚   â”‚  â”‚ GET  /matches     â”‚          â”‚ io.on('connection')â”‚                â”‚  â”‚   â”‚
â”‚   â”‚   â”‚  â”‚ POST /matches     â”‚          â”‚ socket.join(room)  â”‚                â”‚  â”‚   â”‚
â”‚   â”‚   â”‚  â”‚ PATCH /matches/:idâ”‚          â”‚ socket.on('event') â”‚                â”‚  â”‚   â”‚
â”‚   â”‚   â”‚  â”‚ ...               â”‚          â”‚ io.to(room).emit() â”‚                â”‚  â”‚   â”‚
â”‚   â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚  â”‚   â”‚
â”‚   â”‚   â”‚                                                                       â”‚  â”‚   â”‚
â”‚   â”‚   â”‚  httpServer.listen(3000);                                             â”‚  â”‚   â”‚
â”‚   â”‚   â”‚                                                                       â”‚  â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Estructura de Proyecto Sugerida

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ESTRUCTURA DE CARPETAS                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   iceplay-backend/                                                                   â”‚
â”‚   â”‚                                                                                  â”‚
â”‚   â”œâ”€â”€ src/                                                                           â”‚
â”‚   â”‚   â”œâ”€â”€ index.ts              # Entry point                                       â”‚
â”‚   â”‚   â”‚                                                                              â”‚
â”‚   â”‚   â”œâ”€â”€ config/                                                                    â”‚
â”‚   â”‚   â”‚   â””â”€â”€ socket.ts         # ConfiguraciÃ³n Socket.io                           â”‚
â”‚   â”‚   â”‚                                                                              â”‚
â”‚   â”‚   â”œâ”€â”€ routes/               # REST API                                          â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ matches.ts                                                            â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ events.ts                                                             â”‚
â”‚   â”‚   â”‚   â””â”€â”€ auth.ts                                                               â”‚
â”‚   â”‚   â”‚                                                                              â”‚
â”‚   â”‚   â”œâ”€â”€ handlers/             # WebSocket handlers                                â”‚
â”‚   â”‚   â”‚   â””â”€â”€ match.handler.ts  # LÃ³gica de partidos en tiempo real                â”‚
â”‚   â”‚   â”‚                                                                              â”‚
â”‚   â”‚   â”œâ”€â”€ services/                                                                  â”‚
â”‚   â”‚   â”‚   â””â”€â”€ match.service.ts  # LÃ³gica de negocio                                â”‚
â”‚   â”‚   â”‚                                                                              â”‚
â”‚   â”‚   â””â”€â”€ types/                                                                     â”‚
â”‚   â”‚       â””â”€â”€ socket.types.ts   # Interfaces TypeScript                            â”‚
â”‚   â”‚                                                                                  â”‚
â”‚   â”œâ”€â”€ package.json                                                                   â”‚
â”‚   â””â”€â”€ tsconfig.json                                                                  â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Ejemplo de CÃ³digo (Conceptual)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SERVIDOR EXPRESS + SOCKET.IO                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   // src/index.ts                                                                   â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                                  â”‚
â”‚                                                                                      â”‚
â”‚   import express from 'express';                                                    â”‚
â”‚   import { createServer } from 'http';                                              â”‚
â”‚   import { Server } from 'socket.io';                                               â”‚
â”‚   import cors from 'cors';                                                          â”‚
â”‚                                                                                      â”‚
â”‚   const app = express();                                                            â”‚
â”‚   const httpServer = createServer(app);                                             â”‚
â”‚                                                                                      â”‚
â”‚   const io = new Server(httpServer, {                                               â”‚
â”‚     cors: { origin: 'http://localhost:4200' }  // Angular                           â”‚
â”‚   });                                                                               â”‚
â”‚                                                                                      â”‚
â”‚   app.use(cors());                                                                  â”‚
â”‚   app.use(express.json());                                                          â”‚
â”‚                                                                                      â”‚
â”‚   // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                    â”‚
â”‚   // REST API (para CRUD normal)                                                    â”‚
â”‚   // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                    â”‚
â”‚                                                                                      â”‚
â”‚   app.get('/matches', (req, res) => {                                               â”‚
â”‚     // Obtener partidos de la DB                                                    â”‚
â”‚   });                                                                               â”‚
â”‚                                                                                      â”‚
â”‚   app.get('/matches/:id', (req, res) => {                                           â”‚
â”‚     // Obtener un partido                                                           â”‚
â”‚   });                                                                               â”‚
â”‚                                                                                      â”‚
â”‚   // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                    â”‚
â”‚   // WEBSOCKET (para tiempo real)                                                   â”‚
â”‚   // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                    â”‚
â”‚                                                                                      â”‚
â”‚   // Estado en memoria (simple para MVP)                                            â”‚
â”‚   const matchStates = new Map<string, MatchState>();                                â”‚
â”‚                                                                                      â”‚
â”‚   io.on('connection', (socket) => {                                                 â”‚
â”‚     console.log('Usuario conectado:', socket.id);                                   â”‚
â”‚                                                                                      â”‚
â”‚     // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                            â”‚
â”‚     // JOIN: Usuario se une a un partido                                            â”‚
â”‚     // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                            â”‚
â”‚     socket.on('match:join', (matchId: string) => {                                  â”‚
â”‚       socket.join(`match_${matchId}`);                                              â”‚
â”‚       console.log(`${socket.id} joined match_${matchId}`);                          â”‚
â”‚                                                                                      â”‚
â”‚       // Enviar estado actual del partido                                           â”‚
â”‚       const state = matchStates.get(matchId);                                       â”‚
â”‚       if (state) {                                                                  â”‚
â”‚         socket.emit('match:state', state);                                          â”‚
â”‚       }                                                                             â”‚
â”‚     });                                                                             â”‚
â”‚                                                                                      â”‚
â”‚     // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                            â”‚
â”‚     // LEAVE: Usuario sale de un partido                                            â”‚
â”‚     // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                            â”‚
â”‚     socket.on('match:leave', (matchId: string) => {                                 â”‚
â”‚       socket.leave(`match_${matchId}`);                                             â”‚
â”‚     });                                                                             â”‚
â”‚                                                                                      â”‚
â”‚     // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                            â”‚
â”‚     // EVENT: Admin registra un evento (gol, tarjeta)                               â”‚
â”‚     // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                            â”‚
â”‚     socket.on('match:event', (data: MatchEventDto) => {                             â”‚
â”‚       const { matchId, type, playerId, teamId, minute } = data;                     â”‚
â”‚                                                                                      â”‚
â”‚       // TODO: Validar que es admin                                                 â”‚
â”‚       // TODO: Guardar en DB                                                        â”‚
â”‚                                                                                      â”‚
â”‚       // Actualizar estado en memoria                                               â”‚
â”‚       const state = matchStates.get(matchId) || createInitialState();               â”‚
â”‚       if (type === 'goal') {                                                        â”‚
â”‚         if (teamId === 'home') state.homeScore++;                                   â”‚
â”‚         else state.awayScore++;                                                     â”‚
â”‚       }                                                                             â”‚
â”‚       state.events.push({ type, playerId, teamId, minute });                        â”‚
â”‚       matchStates.set(matchId, state);                                              â”‚
â”‚                                                                                      â”‚
â”‚       // Broadcast a TODOS en la room del partido                                   â”‚
â”‚       io.to(`match_${matchId}`).emit('match:updated', {                             â”‚
â”‚         matchId,                                                                    â”‚
â”‚         homeScore: state.homeScore,                                                 â”‚
â”‚         awayScore: state.awayScore,                                                 â”‚
â”‚         newEvent: { type, playerId, teamId, minute }                                â”‚
â”‚       });                                                                           â”‚
â”‚     });                                                                             â”‚
â”‚                                                                                      â”‚
â”‚     // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                            â”‚
â”‚     // TIMER: Admin actualiza el cronÃ³metro                                         â”‚
â”‚     // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                            â”‚
â”‚     socket.on('match:timer', (data: TimerDto) => {                                  â”‚
â”‚       const { matchId, elapsedSeconds, isRunning } = data;                          â”‚
â”‚                                                                                      â”‚
â”‚       io.to(`match_${matchId}`).emit('match:timer', {                               â”‚
â”‚         matchId,                                                                    â”‚
â”‚         elapsedSeconds,                                                             â”‚
â”‚         isRunning                                                                   â”‚
â”‚       });                                                                           â”‚
â”‚     });                                                                             â”‚
â”‚                                                                                      â”‚
â”‚     // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                            â”‚
â”‚     // DISCONNECT                                                                   â”‚
â”‚     // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                            â”‚
â”‚     socket.on('disconnect', () => {                                                 â”‚
â”‚       console.log('Usuario desconectado:', socket.id);                              â”‚
â”‚     });                                                                             â”‚
â”‚   });                                                                               â”‚
â”‚                                                                                      â”‚
â”‚   // Iniciar servidor                                                               â”‚
â”‚   httpServer.listen(3000, () => {                                                   â”‚
â”‚     console.log('Server running on http://localhost:3000');                         â”‚
â”‚   });                                                                               â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Cliente Angular (Socket.io-client)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ANGULAR - WebSocket Service                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   // src/app/core/services/websocket.service.ts                                     â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                     â”‚
â”‚                                                                                      â”‚
â”‚   import { Injectable, signal } from '@angular/core';                               â”‚
â”‚   import { io, Socket } from 'socket.io-client';                                    â”‚
â”‚   import { Subject } from 'rxjs';                                                   â”‚
â”‚                                                                                      â”‚
â”‚   @Injectable({ providedIn: 'root' })                                               â”‚
â”‚   export class WebSocketService {                                                   â”‚
â”‚     private socket: Socket | null = null;                                           â”‚
â”‚     private _isConnected = signal(false);                                           â”‚
â”‚                                                                                      â”‚
â”‚     // Subjects para diferentes tipos de eventos                                    â”‚
â”‚     matchUpdated$ = new Subject<MatchUpdate>();                                     â”‚
â”‚     timerUpdated$ = new Subject<TimerUpdate>();                                     â”‚
â”‚     matchState$ = new Subject<MatchState>();                                        â”‚
â”‚                                                                                      â”‚
â”‚     isConnected = this._isConnected.asReadonly();                                   â”‚
â”‚                                                                                      â”‚
â”‚     connect() {                                                                     â”‚
â”‚       if (this.socket?.connected) return;                                           â”‚
â”‚                                                                                      â”‚
â”‚       this.socket = io('http://localhost:3000');                                    â”‚
â”‚                                                                                      â”‚
â”‚       this.socket.on('connect', () => {                                             â”‚
â”‚         this._isConnected.set(true);                                                â”‚
â”‚         console.log('WebSocket connected');                                         â”‚
â”‚       });                                                                           â”‚
â”‚                                                                                      â”‚
â”‚       this.socket.on('disconnect', () => {                                          â”‚
â”‚         this._isConnected.set(false);                                               â”‚
â”‚         console.log('WebSocket disconnected');                                      â”‚
â”‚       });                                                                           â”‚
â”‚                                                                                      â”‚
â”‚       // Escuchar eventos del servidor                                              â”‚
â”‚       this.socket.on('match:state', (data) => this.matchState$.next(data));         â”‚
â”‚       this.socket.on('match:updated', (data) => this.matchUpdated$.next(data));     â”‚
â”‚       this.socket.on('match:timer', (data) => this.timerUpdated$.next(data));       â”‚
â”‚     }                                                                               â”‚
â”‚                                                                                      â”‚
â”‚     disconnect() {                                                                  â”‚
â”‚       this.socket?.disconnect();                                                    â”‚
â”‚       this.socket = null;                                                           â”‚
â”‚     }                                                                               â”‚
â”‚                                                                                      â”‚
â”‚     // Unirse a un partido                                                          â”‚
â”‚     joinMatch(matchId: string) {                                                    â”‚
â”‚       this.socket?.emit('match:join', matchId);                                     â”‚
â”‚     }                                                                               â”‚
â”‚                                                                                      â”‚
â”‚     // Salir de un partido                                                          â”‚
â”‚     leaveMatch(matchId: string) {                                                   â”‚
â”‚       this.socket?.emit('match:leave', matchId);                                    â”‚
â”‚     }                                                                               â”‚
â”‚                                                                                      â”‚
â”‚     // Admin: Enviar evento (gol, tarjeta, etc.)                                    â”‚
â”‚     sendEvent(event: MatchEventDto) {                                               â”‚
â”‚       this.socket?.emit('match:event', event);                                      â”‚
â”‚     }                                                                               â”‚
â”‚                                                                                      â”‚
â”‚     // Admin: Actualizar timer                                                      â”‚
â”‚     sendTimerUpdate(data: TimerDto) {                                               â”‚
â”‚       this.socket?.emit('match:timer', data);                                       â”‚
â”‚     }                                                                               â”‚
â”‚   }                                                                                 â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Dependencias Necesarias

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DEPENDENCIAS                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   BACKEND (Express)                                                                 â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                                 â”‚
â”‚                                                                                      â”‚
â”‚   npm init -y                                                                       â”‚
â”‚   npm install express socket.io cors                                                â”‚
â”‚   npm install -D typescript @types/express @types/node ts-node nodemon              â”‚
â”‚                                                                                      â”‚
â”‚   // package.json scripts                                                           â”‚
â”‚   "scripts": {                                                                      â”‚
â”‚     "dev": "nodemon src/index.ts",                                                  â”‚
â”‚     "build": "tsc",                                                                 â”‚
â”‚     "start": "node dist/index.js"                                                   â”‚
â”‚   }                                                                                 â”‚
â”‚                                                                                      â”‚
â”‚                                                                                      â”‚
â”‚   FRONTEND (Angular - Iceplay)                                                      â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                      â”‚
â”‚                                                                                      â”‚
â”‚   npm install socket.io-client                                                      â”‚
â”‚                                                                                      â”‚
â”‚                                                                                      â”‚
â”‚   OPCIONAL (si quieres tipos compartidos)                                           â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                           â”‚
â”‚                                                                                      â”‚
â”‚   // shared/types.ts (puedes copiar a ambos proyectos)                             â”‚
â”‚   interface MatchEventDto {                                                         â”‚
â”‚     matchId: string;                                                                â”‚
â”‚     type: 'goal' | 'yellow_card' | 'red_card' | 'substitution';                    â”‚
â”‚     playerId: string;                                                               â”‚
â”‚     teamId: 'home' | 'away';                                                        â”‚
â”‚     minute: number;                                                                 â”‚
â”‚   }                                                                                 â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Resumen: Express es Perfecto para Iceplay

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              RESUMEN                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   âœ… Express + Socket.io = CombinaciÃ³n probada y simple                             â”‚
â”‚                                                                                      â”‚
â”‚   âœ… ~50-100 lÃ­neas de cÃ³digo para WebSockets funcionales                           â”‚
â”‚                                                                                      â”‚
â”‚   âœ… Puedes mantener json-server para datos estÃ¡ticos                               â”‚
â”‚      y agregar Express solo para WebSockets                                         â”‚
â”‚                                                                                      â”‚
â”‚   âœ… FÃ¡cil de entender y mantener                                                   â”‚
â”‚                                                                                      â”‚
â”‚   âœ… Misma performance que NestJS                                                   â”‚
â”‚                                                                                      â”‚
â”‚   âœ… Puedes migrar a NestJS despuÃ©s si lo necesitas                                 â”‚
â”‚                                                                                      â”‚
â”‚                                                                                      â”‚
â”‚   ğŸ“¦ Stack recomendado:                                                             â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                             â”‚
â”‚   â€¢ Express + Socket.io (backend WebSocket)                                         â”‚
â”‚   â€¢ json-server o SQLite (datos)                                                    â”‚
â”‚   â€¢ Angular + socket.io-client (frontend)                                           â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

Â¿Quieres que te explique algo mÃ¡s especÃ­fico sobre la implementaciÃ³n con Express?

---

**User**

Y a nivel de seguridad tambien es buena idea usasr Express?

---

**Cursor**

## Seguridad en Express: SÃ­, es Seguro (con la configuraciÃ³n correcta)

Express es usado por empresas como **Netflix, Uber, PayPal, IBM** - es maduro y seguro, pero requiere configuraciÃ³n manual.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    EXPRESS vs NESTJS - SEGURIDAD                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   â”‚                     â”‚  Express           â”‚  NestJS              â”‚               â”‚
â”‚   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚               â”‚
â”‚   â”‚ Seguridad base      â”‚  MÃ­nima (manual)   â”‚  MÃ­nima (manual)     â”‚               â”‚
â”‚   â”‚ Helmet, CORS, etc   â”‚  Instalar manual   â”‚  Instalar manual     â”‚               â”‚
â”‚   â”‚ AutenticaciÃ³n       â”‚  Passport.js       â”‚  Passport.js/Guards  â”‚               â”‚
â”‚   â”‚ ValidaciÃ³n          â”‚  express-validator â”‚  class-validator     â”‚               â”‚
â”‚   â”‚ Rate limiting       â”‚  express-rate-limitâ”‚  @nestjs/throttler   â”‚               â”‚
â”‚   â”‚                     â”‚                    â”‚                      â”‚               â”‚
â”‚   â”‚ CONCLUSIÃ“N          â”‚  Igual de seguro si configuras bien      â”‚               â”‚
â”‚   â”‚                     â”‚  La seguridad depende de TI, no del framework            â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Capas de Seguridad Necesarias

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CAPAS DE SEGURIDAD PARA EXPRESS + SOCKET.IO                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚                              INTERNET                                                â”‚
â”‚                                  â”‚                                                   â”‚
â”‚                                  â–¼                                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  1. HTTPS / TLS                                                              â”‚  â”‚
â”‚   â”‚     â€¢ Certificado SSL (Let's Encrypt gratis)                                â”‚  â”‚
â”‚   â”‚     â€¢ wss:// para WebSockets (no ws://)                                     â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                  â”‚                                                   â”‚
â”‚                                  â–¼                                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  2. RATE LIMITING                                                            â”‚  â”‚
â”‚   â”‚     â€¢ Limitar requests por IP                                               â”‚  â”‚
â”‚   â”‚     â€¢ Prevenir DDoS y brute force                                           â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                  â”‚                                                   â”‚
â”‚                                  â–¼                                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  3. HELMET (HTTP Headers)                                                    â”‚  â”‚
â”‚   â”‚     â€¢ X-Content-Type-Options                                                â”‚  â”‚
â”‚   â”‚     â€¢ X-Frame-Options                                                       â”‚  â”‚
â”‚   â”‚     â€¢ Content-Security-Policy                                               â”‚  â”‚
â”‚   â”‚     â€¢ + 10 headers mÃ¡s                                                      â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                  â”‚                                                   â”‚
â”‚                                  â–¼                                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  4. CORS                                                                     â”‚  â”‚
â”‚   â”‚     â€¢ Solo permitir tu dominio de Angular                                   â”‚  â”‚
â”‚   â”‚     â€¢ Bloquear requests de otros orÃ­genes                                   â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                  â”‚                                                   â”‚
â”‚                                  â–¼                                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  5. AUTENTICACIÃ“N                                                            â”‚  â”‚
â”‚   â”‚     â€¢ JWT para REST API                                                     â”‚  â”‚
â”‚   â”‚     â€¢ JWT o token en handshake para WebSockets                              â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                  â”‚                                                   â”‚
â”‚                                  â–¼                                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  6. VALIDACIÃ“N DE DATOS                                                      â”‚  â”‚
â”‚   â”‚     â€¢ Validar TODOS los inputs                                              â”‚  â”‚
â”‚   â”‚     â€¢ Sanitizar datos                                                       â”‚  â”‚
â”‚   â”‚     â€¢ Prevenir injection                                                    â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                  â”‚                                                   â”‚
â”‚                                  â–¼                                                   â”‚
â”‚                          TU APLICACIÃ“N                                               â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### ConfiguraciÃ³n de Seguridad (CÃ³digo Conceptual)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    EXPRESS - CONFIGURACIÃ“N DE SEGURIDAD                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   // Dependencias                                                                   â”‚
â”‚   npm install helmet cors express-rate-limit jsonwebtoken                           â”‚
â”‚                                                                                      â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                                      â”‚
â”‚   import express from 'express';                                                    â”‚
â”‚   import helmet from 'helmet';                                                      â”‚
â”‚   import cors from 'cors';                                                          â”‚
â”‚   import rateLimit from 'express-rate-limit';                                       â”‚
â”‚   import { createServer } from 'http';                                              â”‚
â”‚   import { Server } from 'socket.io';                                               â”‚
â”‚   import jwt from 'jsonwebtoken';                                                   â”‚
â”‚                                                                                      â”‚
â”‚   const app = express();                                                            â”‚
â”‚                                                                                      â”‚
â”‚   // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                    â”‚
â”‚   // 1. HELMET - Headers de seguridad                                               â”‚
â”‚   // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                    â”‚
â”‚   app.use(helmet());                                                                â”‚
â”‚   // AÃ±ade automÃ¡ticamente ~15 headers de seguridad                                â”‚
â”‚                                                                                      â”‚
â”‚   // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                    â”‚
â”‚   // 2. CORS - Solo permitir tu frontend                                            â”‚
â”‚   // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                    â”‚
â”‚   app.use(cors({                                                                    â”‚
â”‚     origin: ['https://iceplay.com', 'http://localhost:4200'],                       â”‚
â”‚     credentials: true                                                               â”‚
â”‚   }));                                                                              â”‚
â”‚                                                                                      â”‚
â”‚   // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                    â”‚
â”‚   // 3. RATE LIMITING - Prevenir abuso                                              â”‚
â”‚   // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                    â”‚
â”‚   const limiter = rateLimit({                                                       â”‚
â”‚     windowMs: 15 * 60 * 1000,  // 15 minutos                                       â”‚
â”‚     max: 100,                   // mÃ¡x 100 requests por ventana                     â”‚
â”‚     message: 'Too many requests, please try again later'                            â”‚
â”‚   });                                                                               â”‚
â”‚   app.use('/api/', limiter);                                                        â”‚
â”‚                                                                                      â”‚
â”‚   // Rate limit mÃ¡s estricto para login                                             â”‚
â”‚   const loginLimiter = rateLimit({                                                  â”‚
â”‚     windowMs: 60 * 60 * 1000,  // 1 hora                                           â”‚
â”‚     max: 5,                     // mÃ¡x 5 intentos                                   â”‚
â”‚     message: 'Too many login attempts'                                              â”‚
â”‚   });                                                                               â”‚
â”‚   app.use('/api/auth/login', loginLimiter);                                         â”‚
â”‚                                                                                      â”‚
â”‚   // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                    â”‚
â”‚   // 4. VALIDACIÃ“N - Evitar datos maliciosos                                        â”‚
â”‚   // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                    â”‚
â”‚   app.use(express.json({ limit: '10kb' }));  // Limitar tamaÃ±o de body             â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Seguridad EspecÃ­fica para WebSockets

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SEGURIDAD EN SOCKET.IO                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                    â”‚
â”‚   // CONFIGURACIÃ“N SEGURA DE SOCKET.IO                                              â”‚
â”‚   // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                    â”‚
â”‚                                                                                      â”‚
â”‚   const io = new Server(httpServer, {                                               â”‚
â”‚     cors: {                                                                         â”‚
â”‚       origin: ['https://iceplay.com', 'http://localhost:4200'],                     â”‚
â”‚       credentials: true                                                             â”‚
â”‚     },                                                                              â”‚
â”‚     // LÃ­mites                                                                      â”‚
â”‚     maxHttpBufferSize: 1e6,      // 1MB mÃ¡ximo por mensaje                         â”‚
â”‚     pingTimeout: 60000,          // Timeout de conexiÃ³n                             â”‚
â”‚     pingInterval: 25000,         // Heartbeat                                       â”‚
â”‚   });                                                                               â”‚
â”‚                                                                                      â”‚
â”‚   // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                    â”‚
â”‚   // AUTENTICACIÃ“N EN WEBSOCKET (Middleware)                                        â”‚
â”‚   // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                    â”‚
â”‚                                                                                      â”‚
â”‚   io.use((socket, next) => {                                                        â”‚
â”‚     const token = socket.handshake.auth.token;                                      â”‚
â”‚                                                                                      â”‚
â”‚     if (!token) {                                                                   â”‚
â”‚       // Permitir conexiÃ³n anÃ³nima para espectadores                               â”‚
â”‚       socket.data.user = null;                                                      â”‚
â”‚       socket.data.isAdmin = false;                                                  â”‚
â”‚       return next();                                                                â”‚
â”‚     }                                                                               â”‚
â”‚                                                                                      â”‚
â”‚     try {                                                                           â”‚
â”‚       const decoded = jwt.verify(token, process.env.JWT_SECRET);                    â”‚
â”‚       socket.data.user = decoded;                                                   â”‚
â”‚       socket.data.isAdmin = decoded.role === 'admin';                               â”‚
â”‚       next();                                                                       â”‚
â”‚     } catch (err) {                                                                 â”‚
â”‚       next(new Error('Invalid token'));                                             â”‚
â”‚     }                                                                               â”‚
â”‚   });                                                                               â”‚
â”‚                                                                                      â”‚
â”‚   // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                    â”‚
â”‚   // AUTORIZACIÃ“N POR EVENTO                                                        â”‚
â”‚   // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                    â”‚
â”‚                                                                                      â”‚
â”‚   io.on('connection', (socket) => {                                                 â”‚
â”‚                                                                                      â”‚
â”‚     // âœ… Cualquiera puede unirse a ver un partido                                  â”‚
â”‚     socket.on('match:join', (matchId) => {                                          â”‚
â”‚       socket.join(`match_${matchId}`);                                              â”‚
â”‚     });                                                                             â”‚
â”‚                                                                                      â”‚
â”‚     // ğŸ”’ SOLO ADMIN puede enviar eventos                                           â”‚
â”‚     socket.on('match:event', (data) => {                                            â”‚
â”‚       // Verificar que es admin                                                     â”‚
â”‚       if (!socket.data.isAdmin) {                                                   â”‚
â”‚         socket.emit('error', { message: 'Unauthorized' });                          â”‚
â”‚         return;                                                                     â”‚
â”‚       }                                                                             â”‚
â”‚                                                                                      â”‚
â”‚       // TODO: Verificar que este admin tiene acceso a este partido                 â”‚
â”‚       // (que pertenece a su organizaciÃ³n)                                          â”‚
â”‚                                                                                      â”‚
â”‚       // Validar datos                                                              â”‚
â”‚       if (!isValidEvent(data)) {                                                    â”‚
â”‚         socket.emit('error', { message: 'Invalid event data' });                    â”‚
â”‚         return;                                                                     â”‚
â”‚       }                                                                             â”‚
â”‚                                                                                      â”‚
â”‚       // Procesar evento...                                                         â”‚
â”‚       io.to(`match_${data.matchId}`).emit('match:updated', {...});                  â”‚
â”‚     });                                                                             â”‚
â”‚                                                                                      â”‚
â”‚     // ğŸ”’ SOLO ADMIN puede controlar el timer                                       â”‚
â”‚     socket.on('match:timer', (data) => {                                            â”‚
â”‚       if (!socket.data.isAdmin) {                                                   â”‚
â”‚         socket.emit('error', { message: 'Unauthorized' });                          â”‚
â”‚         return;                                                                     â”‚
â”‚       }                                                                             â”‚
â”‚       // ...                                                                        â”‚
â”‚     });                                                                             â”‚
â”‚   });                                                                               â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Flujo de AutenticaciÃ³n WebSocket

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FLUJO DE AUTENTICACIÃ“N                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   ESPECTADOR (Sin autenticar)                                                       â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                       â”‚
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚   â”‚   Angular   â”‚                              â”‚   Server    â”‚                      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚          â”‚                                            â”‚                             â”‚
â”‚          â”‚  WebSocket connect (sin token)             â”‚                             â”‚
â”‚          â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                             â”‚
â”‚          â”‚                                            â”‚                             â”‚
â”‚          â”‚  âœ… Conectado (user: null, isAdmin: false) â”‚                             â”‚
â”‚          â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                             â”‚
â”‚          â”‚                                            â”‚                             â”‚
â”‚          â”‚  match:join('match_001')                   â”‚                             â”‚
â”‚          â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚  âœ… OK (solo lectura)       â”‚
â”‚          â”‚                                            â”‚                             â”‚
â”‚          â”‚  match:event({...})                        â”‚                             â”‚
â”‚          â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚  âŒ Unauthorized            â”‚
â”‚          â”‚                                            â”‚                             â”‚
â”‚                                                                                      â”‚
â”‚                                                                                      â”‚
â”‚   ADMIN (Autenticado)                                                               â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                               â”‚
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚   â”‚   Angular   â”‚                              â”‚   Server    â”‚                      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚          â”‚                                            â”‚                             â”‚
â”‚          â”‚  1. Login REST: POST /auth/login           â”‚                             â”‚
â”‚          â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                             â”‚
â”‚          â”‚                                            â”‚                             â”‚
â”‚          â”‚  { token: 'eyJhbG...' }                    â”‚                             â”‚
â”‚          â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                             â”‚
â”‚          â”‚                                            â”‚                             â”‚
â”‚          â”‚  2. WebSocket connect CON token            â”‚                             â”‚
â”‚          â”‚     auth: { token: 'eyJhbG...' }           â”‚                             â”‚
â”‚          â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                             â”‚
â”‚          â”‚                                            â”‚  Middleware valida JWT      â”‚
â”‚          â”‚  âœ… Conectado (user: {...}, isAdmin: true) â”‚                             â”‚
â”‚          â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                             â”‚
â”‚          â”‚                                            â”‚                             â”‚
â”‚          â”‚  match:event({type: 'goal', ...})          â”‚                             â”‚
â”‚          â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚  âœ… Autorizado              â”‚
â”‚          â”‚                                            â”‚     Broadcast a room        â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Angular: Conectar con Token

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ANGULAR - CONEXIÃ“N CON AUTENTICACIÃ“N                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   // websocket.service.ts                                                           â”‚
â”‚                                                                                      â”‚
â”‚   @Injectable({ providedIn: 'root' })                                               â”‚
â”‚   export class WebSocketService {                                                   â”‚
â”‚     private authService = inject(AuthService);                                      â”‚
â”‚     private socket: Socket | null = null;                                           â”‚
â”‚                                                                                      â”‚
â”‚     connect() {                                                                     â”‚
â”‚       const token = this.authService.token();                                       â”‚
â”‚                                                                                      â”‚
â”‚       this.socket = io('https://api.iceplay.com', {                                 â”‚
â”‚         // Enviar token en el handshake                                             â”‚
â”‚         auth: {                                                                     â”‚
â”‚           token: token  // null si es espectador anÃ³nimo                           â”‚
â”‚         },                                                                          â”‚
â”‚         // ReconexiÃ³n automÃ¡tica                                                    â”‚
â”‚         reconnection: true,                                                         â”‚
â”‚         reconnectionAttempts: 5,                                                    â”‚
â”‚         reconnectionDelay: 1000,                                                    â”‚
â”‚       });                                                                           â”‚
â”‚                                                                                      â”‚
â”‚       // Manejar errores de autenticaciÃ³n                                           â”‚
â”‚       this.socket.on('connect_error', (err) => {                                    â”‚
â”‚         if (err.message === 'Invalid token') {                                      â”‚
â”‚           // Token expirado o invÃ¡lido                                              â”‚
â”‚           this.authService.logout();                                                â”‚
â”‚         }                                                                           â”‚
â”‚       });                                                                           â”‚
â”‚     }                                                                               â”‚
â”‚   }                                                                                 â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Checklist de Seguridad

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CHECKLIST DE SEGURIDAD PARA PRODUCCIÃ“N                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   INFRAESTRUCTURA                                                                   â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                                   â”‚
â”‚   â˜ HTTPS obligatorio (Let's Encrypt)                                              â”‚
â”‚   â˜ wss:// para WebSockets (no ws://)                                              â”‚
â”‚   â˜ Variables de entorno para secretos (no hardcoded)                              â”‚
â”‚   â˜ JWT_SECRET fuerte (32+ caracteres aleatorios)                                  â”‚
â”‚                                                                                      â”‚
â”‚   EXPRESS                                                                           â”‚
â”‚   â•â•â•â•â•â•â•                                                                           â”‚
â”‚   â˜ helmet() para headers de seguridad                                             â”‚
â”‚   â˜ CORS configurado (solo tu dominio)                                             â”‚
â”‚   â˜ Rate limiting en todas las rutas                                               â”‚
â”‚   â˜ Rate limiting estricto en login                                                â”‚
â”‚   â˜ Body parser con lÃ­mite de tamaÃ±o                                               â”‚
â”‚   â˜ No exponer stack traces en producciÃ³n                                          â”‚
â”‚                                                                                      â”‚
â”‚   SOCKET.IO                                                                         â”‚
â”‚   â•â•â•â•â•â•â•â•â•                                                                         â”‚
â”‚   â˜ CORS configurado                                                               â”‚
â”‚   â˜ Middleware de autenticaciÃ³n                                                    â”‚
â”‚   â˜ Verificar permisos en CADA evento                                              â”‚
â”‚   â˜ Validar datos de entrada                                                       â”‚
â”‚   â˜ Limitar tamaÃ±o de mensajes (maxHttpBufferSize)                                 â”‚
â”‚   â˜ Verificar que admin pertenece a la organizaciÃ³n del partido                    â”‚
â”‚                                                                                      â”‚
â”‚   AUTENTICACIÃ“N                                                                     â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                                    â”‚
â”‚   â˜ JWT con expiraciÃ³n corta (1-24 horas)                                          â”‚
â”‚   â˜ Refresh tokens para sesiones largas                                            â”‚
â”‚   â˜ Passwords hasheados (bcrypt)                                                   â”‚
â”‚   â˜ Verificar roles en cada acciÃ³n sensible                                        â”‚
â”‚                                                                                      â”‚
â”‚   BASE DE DATOS                                                                     â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•                                                                     â”‚
â”‚   â˜ Queries parametrizados (prevenir SQL injection)                                â”‚
â”‚   â˜ ORM o query builder (Prisma, Drizzle, Knex)                                    â”‚
â”‚   â˜ Backups regulares                                                              â”‚
â”‚                                                                                      â”‚
â”‚   MONITOREO                                                                         â”‚
â”‚   â•â•â•â•â•â•â•â•â•                                                                         â”‚
â”‚   â˜ Logging de eventos de seguridad                                                â”‚
â”‚   â˜ Alertas para actividad sospechosa                                              â”‚
â”‚   â˜ Logs de acceso (quiÃ©n hizo quÃ©)                                                â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Resumen

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              CONCLUSIÃ“N                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   âœ… Express es SEGURO si lo configuras correctamente                               â”‚
â”‚                                                                                      â”‚
â”‚   âœ… NestJS no es "mÃ¡s seguro" automÃ¡ticamente                                      â”‚
â”‚      - Ambos usan las mismas librerÃ­as (helmet, passport, etc.)                     â”‚
â”‚      - La seguridad depende de TU configuraciÃ³n                                     â”‚
â”‚                                                                                      â”‚
â”‚   âœ… Express es usado por PayPal, Uber, Netflix                                     â”‚
â”‚                                                                                      â”‚
â”‚   âœ… Paquetes esenciales:                                                           â”‚
â”‚      â€¢ helmet (headers)                                                             â”‚
â”‚      â€¢ cors (orÃ­genes)                                                              â”‚
â”‚      â€¢ express-rate-limit (rate limiting)                                           â”‚
â”‚      â€¢ jsonwebtoken (autenticaciÃ³n)                                                 â”‚
â”‚                                                                                      â”‚
â”‚   âœ… Para WebSockets:                                                               â”‚
â”‚      â€¢ Autenticar en el handshake (middleware)                                      â”‚
â”‚      â€¢ Verificar permisos en CADA evento                                            â”‚
â”‚      â€¢ Validar todos los datos de entrada                                           â”‚
â”‚                                                                                      â”‚
â”‚                                                                                      â”‚
â”‚   âš ï¸  Lo mÃ¡s importante:                                                            â”‚
â”‚      â€¢ HTTPS siempre                                                                â”‚
â”‚      â€¢ Validar TODOS los inputs                                                     â”‚
â”‚      â€¢ No confiar en datos del cliente                                              â”‚
â”‚      â€¢ Verificar permisos en el servidor (no solo en Angular)                       â”‚
â”‚                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

Â¿Tienes alguna duda especÃ­fica sobre seguridad o quieres que profundice en algÃºn aspecto?

---

**User**

entonces como quedaria el diragrama del sistema, Angular, WebSockets, Express, MonogDB

---

**Cursor**

## Diagrama Completo del Sistema Iceplay

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                                     â”‚
â”‚                              ARQUITECTURA ICEPLAY - SISTEMA COMPLETO                                â”‚
â”‚                                                                                                     â”‚
â”‚                              Angular + Express + Socket.io + MongoDB                                â”‚
â”‚                                                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


                                         CLIENTES
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                                     â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚     â”‚   ğŸ‘¤ ADMIN          â”‚    â”‚   ğŸ‘¥ ESPECTADOR     â”‚    â”‚   ğŸ‘¥ ESPECTADOR     â”‚                  â”‚
â”‚     â”‚   (Live Logger)     â”‚    â”‚   (Match View)      â”‚    â”‚   (Match List)      â”‚                  â”‚
â”‚     â”‚                     â”‚    â”‚                     â”‚    â”‚                     â”‚                  â”‚
â”‚     â”‚  â€¢ Registra goles   â”‚    â”‚  â€¢ Ve marcador      â”‚    â”‚  â€¢ Ve partidos      â”‚                  â”‚
â”‚     â”‚  â€¢ Control timer    â”‚    â”‚  â€¢ Ve eventos       â”‚    â”‚    en vivo          â”‚                  â”‚
â”‚     â”‚  â€¢ Tarjetas         â”‚    â”‚  â€¢ Tiempo real      â”‚    â”‚  â€¢ Resultados       â”‚                  â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                â”‚                          â”‚                          â”‚                             â”‚
â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                                           â”‚                                                        â”‚
â”‚                                           â–¼                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                                             â”‚   â”‚
â”‚  â”‚                              ANGULAR 21 (Frontend)                                          â”‚   â”‚
â”‚  â”‚                                                                                             â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚   â”‚
â”‚  â”‚   â”‚  AuthService    â”‚  â”‚  ApiService     â”‚  â”‚  WebSocketServiceâ”‚  â”‚  MatchService   â”‚       â”‚   â”‚
â”‚  â”‚   â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚       â”‚   â”‚
â”‚  â”‚   â”‚  â€¢ Login/Logout â”‚  â”‚  â€¢ HTTP calls   â”‚  â”‚  â€¢ Socket.io    â”‚  â”‚  â€¢ CRUD matches â”‚       â”‚   â”‚
â”‚  â”‚   â”‚  â€¢ JWT token    â”‚  â”‚  â€¢ REST API     â”‚  â”‚  â€¢ Real-time    â”‚  â”‚  â€¢ States       â”‚       â”‚   â”‚
â”‚  â”‚   â”‚  â€¢ User state   â”‚  â”‚                 â”‚  â”‚  â€¢ Rooms        â”‚  â”‚                 â”‚       â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚   â”‚
â”‚  â”‚            â”‚                    â”‚                    â”‚                                      â”‚   â”‚
â”‚  â”‚            â”‚         HTTPS      â”‚                    â”‚  WSS (WebSocket Secure)             â”‚   â”‚
â”‚  â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚   â”‚
â”‚  â”‚                                 â”‚                                                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â”‚  HTTPS / WSS
                                     â”‚  Puerto 443 (producciÃ³n)
                                     â”‚  Puerto 3000 (desarrollo)
                                     â”‚
                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                                     â”‚
â”‚                                         BACKEND                                                     â”‚
â”‚                                                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                                                               â”‚  â”‚
â”‚  â”‚                              EXPRESS + SOCKET.IO SERVER                                       â”‚  â”‚
â”‚  â”‚                                                                                               â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚   â”‚                           MIDDLEWARE LAYER                                           â”‚    â”‚  â”‚
â”‚  â”‚   â”‚                                                                                      â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   â”‚  CORS    â”‚  â”‚  Helmet  â”‚  â”‚  Rate    â”‚  â”‚  JSON    â”‚  â”‚  Auth    â”‚             â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   â”‚          â”‚  â”‚  Headers â”‚  â”‚  Limit   â”‚  â”‚  Parser  â”‚  â”‚  JWT     â”‚             â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚    â”‚  â”‚
â”‚  â”‚   â”‚                                                                                      â”‚    â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â”‚                                          â”‚                                                    â”‚  â”‚
â”‚  â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚  â”‚
â”‚  â”‚                    â”‚                                           â”‚                             â”‚  â”‚
â”‚  â”‚                    â–¼                                           â–¼                             â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚  â”‚
â”‚  â”‚   â”‚                                â”‚       â”‚                                â”‚               â”‚  â”‚
â”‚  â”‚   â”‚       REST API (Express)       â”‚       â”‚     WEBSOCKET (Socket.io)      â”‚               â”‚  â”‚
â”‚  â”‚   â”‚                                â”‚       â”‚                                â”‚               â”‚  â”‚
â”‚  â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚       â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚               â”‚  â”‚
â”‚  â”‚   â”‚   â”‚  /api/auth           â”‚     â”‚       â”‚   â”‚  Connection Handler  â”‚     â”‚               â”‚  â”‚
â”‚  â”‚   â”‚   â”‚  â€¢ POST /login       â”‚     â”‚       â”‚   â”‚                      â”‚     â”‚               â”‚  â”‚
â”‚  â”‚   â”‚   â”‚  â€¢ POST /register    â”‚     â”‚       â”‚   â”‚  â€¢ Auth middleware   â”‚     â”‚               â”‚  â”‚
â”‚  â”‚   â”‚   â”‚  â€¢ POST /logout      â”‚     â”‚       â”‚   â”‚  â€¢ JWT validation    â”‚     â”‚               â”‚  â”‚
â”‚  â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚       â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚               â”‚  â”‚
â”‚  â”‚   â”‚                                â”‚       â”‚              â”‚                 â”‚               â”‚  â”‚
â”‚  â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚       â”‚              â–¼                 â”‚               â”‚  â”‚
â”‚  â”‚   â”‚   â”‚  /api/matches        â”‚     â”‚       â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚               â”‚  â”‚
â”‚  â”‚   â”‚   â”‚  â€¢ GET /             â”‚     â”‚       â”‚   â”‚   Event Handlers     â”‚     â”‚               â”‚  â”‚
â”‚  â”‚   â”‚   â”‚  â€¢ GET /:id          â”‚     â”‚       â”‚   â”‚                      â”‚     â”‚               â”‚  â”‚
â”‚  â”‚   â”‚   â”‚  â€¢ POST /            â”‚     â”‚       â”‚   â”‚  â€¢ match:join        â”‚     â”‚               â”‚  â”‚
â”‚  â”‚   â”‚   â”‚  â€¢ PATCH /:id        â”‚     â”‚       â”‚   â”‚  â€¢ match:leave       â”‚     â”‚               â”‚  â”‚
â”‚  â”‚   â”‚   â”‚  â€¢ DELETE /:id       â”‚     â”‚       â”‚   â”‚  â€¢ match:event  ğŸ”’   â”‚     â”‚               â”‚  â”‚
â”‚  â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚       â”‚   â”‚  â€¢ match:timer  ğŸ”’   â”‚     â”‚               â”‚  â”‚
â”‚  â”‚   â”‚                                â”‚       â”‚   â”‚  â€¢ match:status ğŸ”’   â”‚     â”‚               â”‚  â”‚
â”‚  â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚       â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚               â”‚  â”‚
â”‚  â”‚   â”‚   â”‚  /api/teams          â”‚     â”‚       â”‚              â”‚                 â”‚               â”‚  â”‚
â”‚  â”‚   â”‚   â”‚  /api/players        â”‚     â”‚       â”‚              â–¼                 â”‚               â”‚  â”‚
â”‚  â”‚   â”‚   â”‚  /api/events         â”‚     â”‚       â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚               â”‚  â”‚
â”‚  â”‚   â”‚   â”‚  /api/championships  â”‚     â”‚       â”‚   â”‚   ROOMS (por partido)â”‚     â”‚               â”‚  â”‚
â”‚  â”‚   â”‚   â”‚  /api/organizations  â”‚     â”‚       â”‚   â”‚                      â”‚     â”‚               â”‚  â”‚
â”‚  â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚       â”‚   â”‚  match_001: [ğŸ‘¤ğŸ‘¥ğŸ‘¥] â”‚     â”‚               â”‚  â”‚
â”‚  â”‚   â”‚                                â”‚       â”‚   â”‚  match_002: [ğŸ‘¤ğŸ‘¥]   â”‚     â”‚               â”‚  â”‚
â”‚  â”‚   â”‚         ğŸ”’ = Requiere Auth     â”‚       â”‚   â”‚  match_003: [ğŸ‘¤ğŸ‘¥ğŸ‘¥ğŸ‘¥]â”‚     â”‚               â”‚  â”‚
â”‚  â”‚   â”‚                                â”‚       â”‚   â”‚                      â”‚     â”‚               â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜               â”‚  â”‚
â”‚  â”‚                    â”‚                                       â”‚                                 â”‚  â”‚
â”‚  â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚  â”‚
â”‚  â”‚                                        â”‚                                                     â”‚  â”‚
â”‚  â”‚                                        â–¼                                                     â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚   â”‚                              SERVICE LAYER                                          â”‚    â”‚  â”‚
â”‚  â”‚   â”‚                                                                                     â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   â”‚ AuthService â”‚  â”‚MatchService â”‚  â”‚ EventServiceâ”‚  â”‚ TeamService â”‚               â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   â”‚             â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚               â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   â”‚ â€¢ JWT       â”‚  â”‚ â€¢ CRUD      â”‚  â”‚ â€¢ Goals     â”‚  â”‚ â€¢ CRUD      â”‚               â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   â”‚ â€¢ bcrypt    â”‚  â”‚ â€¢ State     â”‚  â”‚ â€¢ Cards     â”‚  â”‚ â€¢ Players   â”‚               â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   â”‚ â€¢ Roles     â”‚  â”‚ â€¢ Broadcast â”‚  â”‚ â€¢ Timer     â”‚  â”‚             â”‚               â”‚    â”‚  â”‚
â”‚  â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚    â”‚  â”‚
â”‚  â”‚   â”‚                                                                                     â”‚    â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â”‚                                        â”‚                                                     â”‚  â”‚
â”‚  â”‚                                        â”‚                                                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                           â”‚                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                            â”‚  Mongoose ODM
                                            â”‚
                                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                                     â”‚
â”‚                                         DATABASE                                                    â”‚
â”‚                                                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                                                               â”‚  â”‚
â”‚  â”‚                                     MONGODB                                                   â”‚  â”‚
â”‚  â”‚                                                                                               â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚  â”‚
â”‚  â”‚   â”‚    users        â”‚  â”‚    matches      â”‚  â”‚    events       â”‚  â”‚    teams        â”‚         â”‚  â”‚
â”‚  â”‚   â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚         â”‚  â”‚
â”‚  â”‚   â”‚ â€¢ _id           â”‚  â”‚ â€¢ _id           â”‚  â”‚ â€¢ _id           â”‚  â”‚ â€¢ _id           â”‚         â”‚  â”‚
â”‚  â”‚   â”‚ â€¢ email         â”‚  â”‚ â€¢ homeTeam      â”‚  â”‚ â€¢ matchId       â”‚  â”‚ â€¢ name          â”‚         â”‚  â”‚
â”‚  â”‚   â”‚ â€¢ password      â”‚  â”‚ â€¢ awayTeam      â”‚  â”‚ â€¢ type          â”‚  â”‚ â€¢ logo          â”‚         â”‚  â”‚
â”‚  â”‚   â”‚ â€¢ role          â”‚  â”‚ â€¢ homeScore     â”‚  â”‚ â€¢ playerId      â”‚  â”‚ â€¢ players[]     â”‚         â”‚  â”‚
â”‚  â”‚   â”‚ â€¢ organizationIdâ”‚  â”‚ â€¢ awayScore     â”‚  â”‚ â€¢ teamId        â”‚  â”‚ â€¢ championshipIdâ”‚         â”‚  â”‚
â”‚  â”‚   â”‚ â€¢ firstName     â”‚  â”‚ â€¢ status        â”‚  â”‚ â€¢ minute        â”‚  â”‚ â€¢ organizationIdâ”‚         â”‚  â”‚
â”‚  â”‚   â”‚ â€¢ lastName      â”‚  â”‚ â€¢ championshipIdâ”‚  â”‚ â€¢ timestamp     â”‚  â”‚                 â”‚         â”‚  â”‚
â”‚  â”‚   â”‚                 â”‚  â”‚ â€¢ scheduledDate â”‚  â”‚                 â”‚  â”‚                 â”‚         â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚
â”‚  â”‚                                                                                               â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚  â”‚
â”‚  â”‚   â”‚  championships  â”‚  â”‚  organizations  â”‚  â”‚    players      â”‚                              â”‚  â”‚
â”‚  â”‚   â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚                              â”‚  â”‚
â”‚  â”‚   â”‚ â€¢ _id           â”‚  â”‚ â€¢ _id           â”‚  â”‚ â€¢ _id           â”‚                              â”‚  â”‚
â”‚  â”‚   â”‚ â€¢ name          â”‚  â”‚ â€¢ name          â”‚  â”‚ â€¢ name          â”‚                              â”‚  â”‚
â”‚  â”‚   â”‚ â€¢ season        â”‚  â”‚ â€¢ logo          â”‚  â”‚ â€¢ number        â”‚                              â”‚  â”‚
â”‚  â”‚   â”‚ â€¢ organizationIdâ”‚  â”‚ â€¢ admins[]      â”‚  â”‚ â€¢ position      â”‚                              â”‚  â”‚
â”‚  â”‚   â”‚ â€¢ sportType     â”‚  â”‚ â€¢ subscription  â”‚  â”‚ â€¢ teamId        â”‚                              â”‚  â”‚
â”‚  â”‚   â”‚ â€¢ status        â”‚  â”‚                 â”‚  â”‚ â€¢ stats         â”‚                              â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚  â”‚
â”‚  â”‚                                                                                               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Flujo de Datos en Tiempo Real

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                  FLUJO: ADMIN REGISTRA UN GOL                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   ADMIN                         EXPRESS + SOCKET.IO                  MONGODB              ESPECTADORES
     â”‚                                   â”‚                               â”‚                      â”‚
     â”‚  1. Click "Goal" button           â”‚                               â”‚                      â”‚
     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                               â”‚                      â”‚
     â”‚    WebSocket: match:event         â”‚                               â”‚                      â”‚
     â”‚    {matchId, type: 'goal',        â”‚                               â”‚                      â”‚
     â”‚     playerId, teamId, minute}     â”‚                               â”‚                      â”‚
     â”‚                                   â”‚                               â”‚                      â”‚
     â”‚                                   â”‚  2. Validate (is admin?)      â”‚                      â”‚
     â”‚                                   â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>       â”‚                      â”‚
     â”‚                                   â”‚                               â”‚                      â”‚
     â”‚                                   â”‚  3. Save event to DB          â”‚                      â”‚
     â”‚                                   â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>                      â”‚
     â”‚                                   â”‚     db.events.insertOne()     â”‚                      â”‚
     â”‚                                   â”‚                               â”‚                      â”‚
     â”‚                                   â”‚  4. Update match score        â”‚                      â”‚
     â”‚                                   â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>                      â”‚
     â”‚                                   â”‚     db.matches.updateOne()    â”‚                      â”‚
     â”‚                                   â”‚                               â”‚                      â”‚
     â”‚                                   â”‚  5. Broadcast to room         â”‚                      â”‚
     â”‚                                   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>
     â”‚                                   â”‚    io.to('match_001').emit()  â”‚                      â”‚
     â”‚                                   â”‚    'match:updated'            â”‚                      â”‚
     â”‚                                   â”‚    {homeScore, awayScore,     â”‚                      â”‚
     â”‚                                   â”‚     newEvent}                 â”‚                      â”‚
     â”‚                                   â”‚                               â”‚                      â”‚
     â”‚  6. Confirmation                  â”‚                               â”‚    7. UI Update      â”‚
     â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                               â”‚    (instant ~50ms)   â”‚
     â”‚    'event:confirmed'              â”‚                               â”‚                      â”‚
     â”‚                                   â”‚                               â”‚                      â”‚
     â–¼                                   â–¼                               â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Score:  â”‚                      â”‚   Event     â”‚                 â”‚  Persisted  â”‚        â”‚  Score:   â”‚
â”‚ 2 - 1   â”‚                      â”‚   logged    â”‚                 â”‚  in MongoDB â”‚        â”‚  2 - 1 âš½ â”‚
â”‚   âœ“     â”‚                      â”‚     âœ“       â”‚                 â”‚      âœ“      â”‚        â”‚  GOAL!    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Estructura de Carpetas del Backend

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                  ESTRUCTURA DEL PROYECTO                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

iceplay-backend/
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts                    # Entry point
â”‚   â”‚
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ db.ts                   # MongoDB connection
â”‚   â”‚   â”œâ”€â”€ socket.ts               # Socket.io config
â”‚   â”‚   â””â”€â”€ env.ts                  # Environment variables
â”‚   â”‚
â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â”œâ”€â”€ auth.middleware.ts      # JWT verification
â”‚   â”‚   â”œâ”€â”€ admin.middleware.ts     # Admin role check
â”‚   â”‚   â””â”€â”€ validate.middleware.ts  # Request validation
â”‚   â”‚
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ auth.routes.ts          # /api/auth/*
â”‚   â”‚   â”œâ”€â”€ match.routes.ts         # /api/matches/*
â”‚   â”‚   â”œâ”€â”€ team.routes.ts          # /api/teams/*
â”‚   â”‚   â”œâ”€â”€ player.routes.ts        # /api/players/*
â”‚   â”‚   â”œâ”€â”€ championship.routes.ts  # /api/championships/*
â”‚   â”‚   â””â”€â”€ index.ts                # Route aggregator
â”‚   â”‚
â”‚   â”œâ”€â”€ handlers/                   # WebSocket handlers
â”‚   â”‚   â”œâ”€â”€ match.handler.ts        # match:* events
â”‚   â”‚   â””â”€â”€ connection.handler.ts   # connect/disconnect
â”‚   â”‚
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ auth.service.ts         # Auth logic
â”‚   â”‚   â”œâ”€â”€ match.service.ts        # Match logic
â”‚   â”‚   â”œâ”€â”€ event.service.ts        # Event logic
â”‚   â”‚   â””â”€â”€ team.service.ts         # Team logic
â”‚   â”‚
â”‚   â”œâ”€â”€ models/                     # Mongoose schemas
â”‚   â”‚   â”œâ”€â”€ user.model.ts
â”‚   â”‚   â”œâ”€â”€ match.model.ts
â”‚   â”‚   â”œâ”€â”€ event.model.ts
â”‚   â”‚   â”œâ”€â”€ team.model.ts
â”‚   â”‚   â”œâ”€â”€ player.model.ts
â”‚   â”‚   â”œâ”€â”€ championship.model.ts
â”‚   â”‚   â””â”€â”€ organization.model.ts
â”‚   â”‚
â”‚   â””â”€â”€ types/
â”‚       â”œâ”€â”€ socket.types.ts         # WebSocket event types
â”‚       â””â”€â”€ api.types.ts            # API DTOs
â”‚
â”œâ”€â”€ .env                            # Environment variables
â”œâ”€â”€ .env.example                    # Example env file
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ README.md


iceplay/  (Angular - tu proyecto actual)
â”‚
â”œâ”€â”€ src/app/
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ api.service.ts          # HTTP REST calls
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.service.ts         # Authentication
â”‚   â”‚   â”‚   â”œâ”€â”€ websocket.service.ts    # ğŸ†• Socket.io client
â”‚   â”‚   â”‚   â”œâ”€â”€ match.service.ts
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ features/
â”‚   â”‚   â”œâ”€â”€ matches/
â”‚   â”‚   â”‚   â””â”€â”€ pages/
â”‚   â”‚   â”‚       â”œâ”€â”€ live-match-logger/  # Admin: registra eventos
â”‚   â”‚   â”‚       â”œâ”€â”€ match-details/      # PÃºblico: ve en tiempo real
â”‚   â”‚   â”‚       â””â”€â”€ matches-list/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â””â”€â”€ ...
â”‚
â””â”€â”€ ...
```

---

### TecnologÃ­as y Dependencias

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                  STACK TECNOLÃ“GICO                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FRONTEND (Angular 21)                                                                              â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                                              â”‚
â”‚                                                                                                     â”‚
â”‚  Existente:                          Agregar:                                                       â”‚
â”‚  â€¢ @angular/core                     â€¢ socket.io-client                                            â”‚
â”‚  â€¢ @angular/material                                                                               â”‚
â”‚  â€¢ @angular/router                                                                                 â”‚
â”‚  â€¢ tailwindcss                                                                                     â”‚
â”‚  â€¢ rxjs                                                                                            â”‚
â”‚                                                                                                     â”‚
â”‚  npm install socket.io-client                                                                      â”‚
â”‚                                                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BACKEND (Express + Socket.io)                                                                      â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                                     â”‚
â”‚                                                                                                     â”‚
â”‚  # Crear proyecto                                                                                   â”‚
â”‚  mkdir iceplay-backend && cd iceplay-backend                                                       â”‚
â”‚  npm init -y                                                                                       â”‚
â”‚                                                                                                     â”‚
â”‚  # Dependencias principales                                                                        â”‚
â”‚  npm install express socket.io mongoose cors helmet express-rate-limit                             â”‚
â”‚  npm install jsonwebtoken bcryptjs dotenv                                                          â”‚
â”‚                                                                                                     â”‚
â”‚  # DevDependencies                                                                                 â”‚
â”‚  npm install -D typescript @types/express @types/node @types/cors                                  â”‚
â”‚  npm install -D @types/jsonwebtoken @types/bcryptjs                                                â”‚
â”‚  npm install -D ts-node nodemon                                                                    â”‚
â”‚                                                                                                     â”‚
â”‚  # Opcional: validaciÃ³n                                                                            â”‚
â”‚  npm install zod                      # Schema validation                                          â”‚
â”‚                                                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DATABASE (MongoDB)                                                                                 â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                                                â”‚
â”‚                                                                                                     â”‚
â”‚  Opciones:                                                                                          â”‚
â”‚                                                                                                     â”‚
â”‚  â€¢ MongoDB Atlas (Cloud) - RECOMENDADO para empezar                                                â”‚
â”‚    â””â”€ Gratis hasta 512MB                                                                           â”‚
â”‚    â””â”€ FÃ¡cil de configurar                                                                          â”‚
â”‚    â””â”€ Backups automÃ¡ticos                                                                          â”‚
â”‚                                                                                                     â”‚
â”‚  â€¢ MongoDB local (Docker)                                                                          â”‚
â”‚    â””â”€ docker run -d -p 27017:27017 --name mongodb mongo                                            â”‚
â”‚                                                                                                     â”‚
â”‚  â€¢ MongoDB instalado localmente                                                                    â”‚
â”‚                                                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Despliegue (ProducciÃ³n)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                  ARQUITECTURA EN PRODUCCIÃ“N                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚      USUARIOS       â”‚
                                    â”‚   (Navegadores)     â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
                                               â”‚ HTTPS
                                               â–¼
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚     CLOUDFLARE      â”‚
                                    â”‚   (CDN + SSL +      â”‚
                                    â”‚    DDoS Protection) â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚                       â”‚                       â”‚
                       â–¼                       â–¼                       â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                     â”‚ â”‚                     â”‚ â”‚                     â”‚
            â”‚   VERCEL / NETLIFY  â”‚ â”‚  RAILWAY / RENDER   â”‚ â”‚   MONGODB ATLAS     â”‚
            â”‚                     â”‚ â”‚  / DIGITALOCEAN     â”‚ â”‚                     â”‚
            â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚                     â”‚ â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
            â”‚   â”‚   Angular   â”‚   â”‚ â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚   â”‚   MongoDB   â”‚   â”‚
            â”‚   â”‚   (Static)  â”‚   â”‚ â”‚   â”‚   Express   â”‚   â”‚ â”‚   â”‚   Cluster   â”‚   â”‚
            â”‚   â”‚             â”‚   â”‚ â”‚   â”‚   +         â”‚   â”‚ â”‚   â”‚             â”‚   â”‚
            â”‚   â”‚  â€¢ HTML     â”‚   â”‚ â”‚   â”‚   Socket.io â”‚   â”‚ â”‚   â”‚  â€¢ Replica  â”‚   â”‚
            â”‚   â”‚  â€¢ CSS      â”‚   â”‚ â”‚   â”‚             â”‚   â”‚ â”‚   â”‚    Set      â”‚   â”‚
            â”‚   â”‚  â€¢ JS       â”‚   â”‚ â”‚   â”‚  Port 3000  â”‚   â”‚ â”‚   â”‚  â€¢ Backups  â”‚   â”‚
            â”‚   â”‚             â”‚   â”‚ â”‚   â”‚             â”‚   â”‚ â”‚   â”‚             â”‚   â”‚
            â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
            â”‚                     â”‚ â”‚                     â”‚ â”‚                     â”‚
            â”‚   ~$0/mes (free)    â”‚ â”‚   ~$5-15/mes        â”‚ â”‚   ~$0/mes (free)    â”‚
            â”‚                     â”‚ â”‚                     â”‚ â”‚   hasta 512MB       â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                 FRONTEND                  BACKEND                  DATABASE


            ğŸ’° COSTO TOTAL ESTIMADO: $5-15/mes para empezar
```

---

### Resumen Visual

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                         RESUMEN                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                                     â”‚
â”‚                                                                                                     â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚     â”‚              â”‚  HTTP   â”‚              â”‚ Mongooseâ”‚              â”‚                              â”‚
â”‚     â”‚   ANGULAR    â”‚ â•â•â•â•â•â•â•>â”‚   EXPRESS    â”‚ â•â•â•â•â•â•â•>â”‚   MONGODB    â”‚                              â”‚
â”‚     â”‚              â”‚         â”‚              â”‚         â”‚              â”‚                              â”‚
â”‚     â”‚  Frontend    â”‚  WSS    â”‚  Backend     â”‚         â”‚  Database    â”‚                              â”‚
â”‚     â”‚  (UI)        â”‚ â•â•â•â•â•â•â•>â”‚  (API +      â”‚         â”‚  (Datos)     â”‚                              â”‚
â”‚     â”‚              â”‚ Socket  â”‚   WebSocket) â”‚         â”‚              â”‚                              â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  .io    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                                                                                                     â”‚
â”‚                                                                                                     â”‚
â”‚                                                                                                     â”‚
â”‚     ğŸ“¦ ComunicaciÃ³n:                                                                                
â”‚        â€¢ REST API (HTTPS) â†’ CRUD de datos                                                           â”‚
â”‚        â€¢ WebSocket (WSS)  â†’ Tiempo real (partidos en vivo)                                          â”‚
â”‚                                                                                                     â”‚
â”‚     ğŸ”’ Seguridad:                                                                                   
â”‚        â€¢ JWT para autenticaciÃ³n                                                                     â”‚
â”‚        â€¢ CORS, Helmet, Rate Limiting                                                                â”‚
â”‚        â€¢ HTTPS/WSS en producciÃ³n                                                                    â”‚
â”‚                                                                                                     â”‚
â”‚     ğŸ’° Costo:                                                                                      
â”‚        â€¢ Desarrollo: $0                                                                             â”‚
â”‚        â€¢ ProducciÃ³n: ~$5-15/mes                                                                     â”‚
â”‚                                                                                                     â”‚
â”‚     ğŸ“Š Capacidad:                                                                                  
â”‚        â€¢ Miles de conexiones simultÃ¡neas                                                            â”‚
â”‚        â€¢ Cientos de partidos en vivo                                                                â”‚
â”‚                                                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

Â¿Quieres que profundice en alguna parte especÃ­fica del diagrama o que te explique cÃ³mo implementar algÃºn componente?


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                                                                  â•‘
â•‘                              ğŸ† ICEPLAY - ARQUITECTURA COMPLETA DEL SISTEMA ğŸ†                                   â•‘
â•‘                                                                                                                  â•‘
â•‘                        Sistema de GestiÃ³n de Ligas Deportivas Multi-tenant                                       â•‘
â•‘                        Angular 21 + Express + Socket.io + MongoDB                                                â•‘
â•‘                                                                                                                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                              ğŸ­ ACTORES DEL SISTEMA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   ğŸ‘‘ SUPER ADMIN    â”‚     â”‚   ğŸ‘¤ ADMIN ORG      â”‚     â”‚   ğŸ‘ï¸ ESPECTADOR     â”‚     â”‚   ğŸ“± APP MÃ“VIL      â”‚
    â”‚      (Fropen)       â”‚     â”‚     (Cliente)       â”‚     â”‚     (PÃºblico)       â”‚     â”‚     (Futuro)        â”‚
    â”‚                     â”‚     â”‚                     â”‚     â”‚                     â”‚     â”‚                     â”‚
    â”‚ â€¢ Crear Orgs        â”‚     â”‚ â€¢ Gestionar Liga    â”‚     â”‚ â€¢ Ver partidos      â”‚     â”‚ â€¢ PWA / Native      â”‚
    â”‚ â€¢ Crear Admins      â”‚     â”‚ â€¢ Crear Campeonatos â”‚     â”‚ â€¢ Ver standings     â”‚     â”‚ â€¢ Push Notificationsâ”‚
    â”‚ â€¢ Gestionar planes  â”‚     â”‚ â€¢ Gestionar equipos â”‚     â”‚ â€¢ Ver estadÃ­sticas  â”‚     â”‚ â€¢ Offline support   â”‚
    â”‚ â€¢ Ver mÃ©tricas      â”‚     â”‚ â€¢ Control partidos  â”‚     â”‚ â€¢ Tiempo real       â”‚     â”‚                     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                           â”‚                           â”‚                           â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                       â”‚
                                                       â–¼
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                           ğŸ–¥ï¸ CAPA DE PRESENTACIÃ“N
                                              (ANGULAR 21 FRONTEND)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                                                  â”‚
â”‚   ğŸ“ src/app/                                                                                                    â”‚
â”‚   â”‚                                                                                                              â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ core/                          NÃšCLEO DE LA APLICACIÃ“N                                                  â”‚
â”‚   â”‚   â”‚                                                                                                          â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ models/                    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                             â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ user.model.ts             â”‚ Interfaces TypeScript para tipado fuerte â”‚                             â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ organization.model.ts     â”‚ Corresponden 1:1 con colecciones MongoDB â”‚                             â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ championship.model.ts     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                             â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ team.model.ts                                                                                      â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ player.model.ts                                                                                    â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ match.model.ts                                                                                     â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ event.model.ts                                                                                     â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ standing.model.ts                                                                                  â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ sport-config.model.ts     â† ConfiguraciÃ³n por deporte (âš½ğŸ€ğŸ)                                      â”‚
â”‚   â”‚   â”‚   â””â”€â”€ announcement.model.ts                                                                              â”‚
â”‚   â”‚   â”‚                                                                                                          â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ services/                  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                             â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ api.service.ts            â”‚ HttpClient wrapper genÃ©rico              â”‚                             â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.service.ts           â”‚ Login/Logout + JWT + Signals             â”‚                             â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ websocket.service.ts      â”‚ Socket.io client para tiempo real   ğŸ†•   â”‚                             â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ organization.service.ts   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                             â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ championship.service.ts                                                                            â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ team.service.ts                                                                                    â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ player.service.ts                                                                                  â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ match.service.ts                                                                                   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ match-event.service.ts                                                                             â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ standing.service.ts       â† Tabla de posiciones                 ğŸ†•                                 â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ csv-import.service.ts     â† ImportaciÃ³n masiva                  ğŸ†•                                 â”‚
â”‚   â”‚   â”‚   â””â”€â”€ log.service.ts            â† AuditorÃ­a de acciones               ğŸ†•                                 â”‚
â”‚   â”‚   â”‚                                                                                                          â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ guards/                    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                             â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.guard.ts             â”‚ ProtecciÃ³n de rutas autenticadas         â”‚                             â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ admin.guard.ts            â”‚ Solo admin + super_admin                 â”‚                             â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ super-admin.guard.ts      â”‚ Solo super_admin                         â”‚                             â”‚
â”‚   â”‚   â”‚   â””â”€â”€ public.guard.ts           â”‚ Redirige si ya estÃ¡ autenticado          â”‚                             â”‚
â”‚   â”‚   â”‚                                 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                             â”‚
â”‚   â”‚   â”‚                                                                                                          â”‚
â”‚   â”‚   â””â”€â”€ ğŸ“‚ interceptors/                                                                                       â”‚
â”‚   â”‚       â””â”€â”€ auth.interceptor.ts       â† Inyecta JWT en headers HTTP                                            â”‚
â”‚   â”‚                                                                                                              â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ features/                      MÃ“DULOS DE FUNCIONALIDAD                                                 â”‚
â”‚   â”‚   â”‚                                                                                                          â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ super-admin/               â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                             â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ pages/                    â”‚ PANTALLAS SUPER ADMIN                    â”‚                             â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/            â”‚ â€¢ Dashboard mÃ©tricas globales            â”‚                             â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ organizations/        â”‚ â€¢ CRUD Organizaciones                    â”‚                             â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ users/                â”‚ â€¢ GestiÃ³n de usuarios admin              â”‚                             â”‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ settings/             â”‚ â€¢ ConfiguraciÃ³n global                   â”‚                             â”‚
â”‚   â”‚   â”‚   â””â”€â”€ super-admin.routes.ts     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                             â”‚
â”‚   â”‚   â”‚                                                                                                          â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ admin/                     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                             â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ pages/                    â”‚ PANTALLAS ADMIN ORGANIZACIÃ“N             â”‚                             â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/            â”‚ â€¢ Resumen de campeonatos                 â”‚                             â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ championships/        â”‚ â€¢ CRUD Campeonatos                       â”‚                             â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ teams/                â”‚ â€¢ CRUD Equipos + CSV Import              â”‚                             â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ players/              â”‚ â€¢ CRUD Jugadores                         â”‚                             â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ matches/              â”‚ â€¢ Lista de partidos                      â”‚                             â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ fixtures/             â”‚ â€¢ Generador de fixture                   â”‚                             â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ match-control/        â”‚ â€¢ ğŸ® PANEL DE CONTROL EN VIVO            â”‚                             â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ standings/            â”‚ â€¢ Tabla de posiciones                    â”‚                             â”‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ statistics/           â”‚ â€¢ EstadÃ­sticas                           â”‚                             â”‚
â”‚   â”‚   â”‚   â””â”€â”€ admin.routes.ts           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                             â”‚
â”‚   â”‚   â”‚                                                                                                          â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ public/                    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   ğŸ†•                        â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ pages/                    â”‚ PANTALLAS PÃšBLICAS (Solo lectura)        â”‚                             â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ home/                 â”‚ â€¢ Ligas disponibles                      â”‚                             â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ championship-view/    â”‚ â€¢ Detalle de campeonato                  â”‚                             â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ match-list/           â”‚ â€¢ Calendario de partidos                 â”‚                             â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ match-live/           â”‚ â€¢ ğŸ“º Vista espectador tiempo real        â”‚                             â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ standings-view/       â”‚ â€¢ Tabla de posiciones pÃºblica            â”‚                             â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ team-profile/         â”‚ â€¢ Perfil de equipo                       â”‚                             â”‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ player-profile/       â”‚ â€¢ Perfil de jugador                      â”‚                             â”‚
â”‚   â”‚   â”‚   â””â”€â”€ public.routes.ts          â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                             â”‚
â”‚   â”‚   â”‚                                                                                                          â”‚
â”‚   â”‚   â””â”€â”€ ğŸ“‚ auth/                                                                                               â”‚
â”‚   â”‚       â”œâ”€â”€ pages/login/                                                                                       â”‚
â”‚   â”‚       â””â”€â”€ auth.routes.ts                                                                                     â”‚
â”‚   â”‚                                                                                                              â”‚
â”‚   â””â”€â”€ ğŸ“‚ shared/                        COMPONENTES REUTILIZABLES                                                â”‚
â”‚       â”œâ”€â”€ ğŸ“‚ ui/                        (Avatar, Badge, Button, Card, Skeleton, Spinner)                         â”‚
â”‚       â”œâ”€â”€ ğŸ“‚ components/                (Componentes de negocio compartidos)                                     â”‚
â”‚       â””â”€â”€ ğŸ“‚ pipes/                     (Formatters, translate)                                                  â”‚
â”‚                                                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                       â”‚
                                                       â”‚  HTTPS (REST API)
                                                       â”‚  WSS (WebSocket)
                                                       â”‚
                                                       â–¼
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                            ğŸ”Œ CAPA DE COMUNICACIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                                                  â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚    â”‚         ğŸŒ REST API (HTTPS)             â”‚          â”‚         ğŸ”´ WEBSOCKET (WSS)              â”‚             â”‚
â”‚    â”‚                                         â”‚          â”‚                                         â”‚             â”‚
â”‚    â”‚  Puerto: 3000 (dev) / 443 (prod)        â”‚          â”‚  Puerto: 3001 (dev) / 443 (prod)        â”‚             â”‚
â”‚    â”‚                                         â”‚          â”‚                                         â”‚             â”‚
â”‚    â”‚  â€¢ Operaciones CRUD                     â”‚          â”‚  â€¢ Eventos en tiempo real               â”‚             â”‚
â”‚    â”‚  â€¢ AutenticaciÃ³n                        â”‚          â”‚  â€¢ Broadcast de partidos                â”‚             â”‚
â”‚    â”‚  â€¢ Subida de archivos (CSV)             â”‚          â”‚  â€¢ SincronizaciÃ³n de estado             â”‚             â”‚
â”‚    â”‚  â€¢ Consultas de datos                   â”‚          â”‚  â€¢ Rooms por partido                    â”‚             â”‚
â”‚    â”‚                                         â”‚          â”‚                                         â”‚             â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                                                                  â”‚
â”‚    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•     â”‚
â”‚                                            DESARROLLO (MOCK)                                                     â”‚
â”‚    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•     â”‚
â”‚                                                                                                                  â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚    â”‚         ğŸ“¦ JSON-SERVER                  â”‚          â”‚         ğŸ”§ MOCK WEBSOCKET               â”‚             â”‚
â”‚    â”‚                                         â”‚          â”‚                                         â”‚             â”‚
â”‚    â”‚  npm run mock                           â”‚          â”‚  (Simular con RxJS interval)            â”‚             â”‚
â”‚    â”‚  Puerto: 3000                           â”‚          â”‚  O usar socket.io-mock                  â”‚             â”‚
â”‚    â”‚                                         â”‚          â”‚                                         â”‚             â”‚
â”‚    â”‚  db.json contiene:                      â”‚          â”‚                                         â”‚             â”‚
â”‚    â”‚  â€¢ organizations                        â”‚          â”‚                                         â”‚             â”‚
â”‚    â”‚  â€¢ users                                â”‚          â”‚                                         â”‚             â”‚
â”‚    â”‚  â€¢ championships                        â”‚          â”‚                                         â”‚             â”‚
â”‚    â”‚  â€¢ teams                                â”‚          â”‚                                         â”‚             â”‚
â”‚    â”‚  â€¢ players                              â”‚          â”‚                                         â”‚             â”‚
â”‚    â”‚  â€¢ matches                              â”‚          â”‚                                         â”‚             â”‚
â”‚    â”‚  â€¢ events                               â”‚          â”‚                                         â”‚             â”‚
â”‚    â”‚  â€¢ standings                  ğŸ†•        â”‚          â”‚                                         â”‚             â”‚
â”‚    â”‚  â€¢ logs                       ğŸ†•        â”‚          â”‚                                         â”‚             â”‚
â”‚    â”‚                                         â”‚          â”‚                                         â”‚             â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                       â”‚
                                                       â”‚
                                                       â–¼
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                              âš™ï¸ CAPA DE BACKEND
                                           (EXPRESS + SOCKET.IO)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                                                  â”‚
â”‚   ğŸ“ backend/                                                                                                    â”‚
â”‚   â”‚                                                                                                              â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ src/                                                                                                    â”‚
â”‚   â”‚   â”‚                                                                                                          â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ server.ts                  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                             â”‚
â”‚   â”‚   â”‚                                 â”‚ Entry point: Express + Socket.io setup   â”‚                             â”‚
â”‚   â”‚   â”‚                                 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                             â”‚
â”‚   â”‚   â”‚                                                                                                          â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ config/                                                                                             â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ database.ts               â† ConexiÃ³n MongoDB                                                       â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ cors.ts                   â† ConfiguraciÃ³n CORS                                                     â”‚
â”‚   â”‚   â”‚   â””â”€â”€ socket.ts                 â† ConfiguraciÃ³n Socket.io                                                â”‚
â”‚   â”‚   â”‚                                                                                                          â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ middleware/                â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•     â”‚
â”‚   â”‚   â”‚   â”‚                             â”‚                MIDDLEWARE PIPELINE                                â”‚     â”‚
â”‚   â”‚   â”‚   â”‚                             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•     â”‚
â”‚   â”‚   â”‚   â”‚                                                                                                      â”‚
â”‚   â”‚   â”‚   â”‚   Request â”€â”€â–¶ [CORS] â”€â”€â–¶ [Helmet] â”€â”€â–¶ [RateLimit] â”€â”€â–¶ [JSON] â”€â”€â–¶ [Auth] â”€â”€â–¶ Route                   â”‚
â”‚   â”‚   â”‚   â”‚                                                                                                      â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ cors.middleware.ts        â† OrÃ­genes permitidos                                                    â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ helmet.middleware.ts      â† Headers de seguridad                                                   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ rate-limit.middleware.ts  â† LÃ­mite de requests                                                     â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.middleware.ts        â† ValidaciÃ³n JWT                                                         â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ role.middleware.ts        â† VerificaciÃ³n de roles                                                  â”‚
â”‚   â”‚   â”‚   â””â”€â”€ org.middleware.ts         â† VerificaciÃ³n de organizaciÃ³n                                           â”‚
â”‚   â”‚   â”‚                                                                                                          â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ routes/                    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•     â”‚
â”‚   â”‚   â”‚   â”‚                             â”‚                    REST API ROUTES                                â”‚     â”‚
â”‚   â”‚   â”‚   â”‚                             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•     â”‚
â”‚   â”‚   â”‚   â”‚                                                                                                      â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.routes.ts            POST   /api/v1/auth/login                                                â”‚
â”‚   â”‚   â”‚   â”‚                             POST   /api/v1/auth/logout                                               â”‚
â”‚   â”‚   â”‚   â”‚                             POST   /api/v1/auth/refresh                                              â”‚
â”‚   â”‚   â”‚   â”‚                             GET    /api/v1/auth/me                                                   â”‚
â”‚   â”‚   â”‚   â”‚                                                                                                      â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ organization.routes.ts    GET    /api/v1/organizations                          ğŸ”’ super_admin    â”‚
â”‚   â”‚   â”‚   â”‚                             POST   /api/v1/organizations                          ğŸ”’ super_admin    â”‚
â”‚   â”‚   â”‚   â”‚                             GET    /api/v1/organizations/:id                      ğŸ”’ super_admin    â”‚
â”‚   â”‚   â”‚   â”‚                             PATCH  /api/v1/organizations/:id                      ğŸ”’ super_admin    â”‚
â”‚   â”‚   â”‚   â”‚                             DELETE /api/v1/organizations/:id                      ğŸ”’ super_admin    â”‚
â”‚   â”‚   â”‚   â”‚                                                                                                      â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ user.routes.ts            GET    /api/v1/users                                  ğŸ”’ super_admin    â”‚
â”‚   â”‚   â”‚   â”‚                             POST   /api/v1/users                                  ğŸ”’ super_admin    â”‚
â”‚   â”‚   â”‚   â”‚                             GET    /api/v1/users/:id                              ğŸ”’ auth           â”‚
â”‚   â”‚   â”‚   â”‚                             PATCH  /api/v1/users/:id                              ğŸ”’ auth           â”‚
â”‚   â”‚   â”‚   â”‚                                                                                                      â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ championship.routes.ts    GET    /api/v1/championships                          ğŸ”’ auth           â”‚
â”‚   â”‚   â”‚   â”‚                             POST   /api/v1/championships                          ğŸ”’ admin          â”‚
â”‚   â”‚   â”‚   â”‚                             GET    /api/v1/championships/:id                      ğŸ”’ auth           â”‚
â”‚   â”‚   â”‚   â”‚                             PATCH  /api/v1/championships/:id                      ğŸ”’ admin          â”‚
â”‚   â”‚   â”‚   â”‚                             DELETE /api/v1/championships/:id                      ğŸ”’ admin          â”‚
â”‚   â”‚   â”‚   â”‚                                                                                                      â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ team.routes.ts            GET    /api/v1/teams                                  ğŸ”’ auth           â”‚
â”‚   â”‚   â”‚   â”‚                             POST   /api/v1/teams                                  ğŸ”’ admin          â”‚
â”‚   â”‚   â”‚   â”‚                             POST   /api/v1/teams/import-csv                       ğŸ”’ admin          â”‚
â”‚   â”‚   â”‚   â”‚                             GET    /api/v1/teams/:id                              ğŸ”’ auth           â”‚
â”‚   â”‚   â”‚   â”‚                             PATCH  /api/v1/teams/:id                              ğŸ”’ admin          â”‚
â”‚   â”‚   â”‚   â”‚                             DELETE /api/v1/teams/:id                              ğŸ”’ admin          â”‚
â”‚   â”‚   â”‚   â”‚                                                                                                      â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ player.routes.ts          GET    /api/v1/players                                ğŸ”’ auth           â”‚
â”‚   â”‚   â”‚   â”‚                             POST   /api/v1/players                                ğŸ”’ admin          â”‚
â”‚   â”‚   â”‚   â”‚                             GET    /api/v1/players/:id                            ğŸ”’ auth           â”‚
â”‚   â”‚   â”‚   â”‚                             PATCH  /api/v1/players/:id                            ğŸ”’ admin          â”‚
â”‚   â”‚   â”‚   â”‚                             DELETE /api/v1/players/:id                            ğŸ”’ admin          â”‚
â”‚   â”‚   â”‚   â”‚                                                                                                      â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ match.routes.ts           GET    /api/v1/matches                                ğŸ”’ auth           â”‚
â”‚   â”‚   â”‚   â”‚                             POST   /api/v1/matches                                ğŸ”’ admin          â”‚
â”‚   â”‚   â”‚   â”‚                             GET    /api/v1/matches/:id                            ğŸ”’ auth           â”‚
â”‚   â”‚   â”‚   â”‚                             PATCH  /api/v1/matches/:id                            ğŸ”’ admin          â”‚
â”‚   â”‚   â”‚   â”‚                             PATCH  /api/v1/matches/:id/score                      ğŸ”’ admin          â”‚
â”‚   â”‚   â”‚   â”‚                             PATCH  /api/v1/matches/:id/status                     ğŸ”’ admin          â”‚
â”‚   â”‚   â”‚   â”‚                             DELETE /api/v1/matches/:id                            ğŸ”’ admin          â”‚
â”‚   â”‚   â”‚   â”‚                                                                                                      â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ event.routes.ts           GET    /api/v1/matches/:matchId/events                ğŸ”’ auth           â”‚
â”‚   â”‚   â”‚   â”‚                             POST   /api/v1/matches/:matchId/events                ğŸ”’ admin          â”‚
â”‚   â”‚   â”‚   â”‚                             PATCH  /api/v1/events/:id                             ğŸ”’ admin          â”‚
â”‚   â”‚   â”‚   â”‚                             DELETE /api/v1/events/:id                             ğŸ”’ admin          â”‚
â”‚   â”‚   â”‚   â”‚                                                                                                      â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ standing.routes.ts        GET    /api/v1/championships/:id/standings            ğŸ”’ auth           â”‚
â”‚   â”‚   â”‚   â”‚                             POST   /api/v1/championships/:id/standings/recalculate ğŸ”’ admin         â”‚
â”‚   â”‚   â”‚   â”‚                                                                                                      â”‚
â”‚   â”‚   â”‚   â””â”€â”€ public.routes.ts          GET    /api/v1/public/championships                   ğŸŒ public         â”‚
â”‚   â”‚   â”‚                                 GET    /api/v1/public/championships/:slug              ğŸŒ public         â”‚
â”‚   â”‚   â”‚                                 GET    /api/v1/public/championships/:id/matches        ğŸŒ public         â”‚
â”‚   â”‚   â”‚                                 GET    /api/v1/public/championships/:id/standings      ğŸŒ public         â”‚
â”‚   â”‚   â”‚                                 GET    /api/v1/public/matches/:id                      ğŸŒ public         â”‚
â”‚   â”‚   â”‚                                 GET    /api/v1/public/teams/:id                        ğŸŒ public         â”‚
â”‚   â”‚   â”‚                                 GET    /api/v1/public/players/:id                      ğŸŒ public         â”‚
â”‚   â”‚   â”‚                                                                                                          â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ controllers/               â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                             â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.controller.ts        â”‚ LÃ³gica de negocio para cada endpoint    â”‚                             â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ organization.controller.tsâ”‚ Delega operaciones a services           â”‚                             â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ championship.controller.tsâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                             â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ team.controller.ts                                                                                 â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ player.controller.ts                                                                               â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ match.controller.ts                                                                                â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ event.controller.ts                                                                                â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ standing.controller.ts                                                                             â”‚
â”‚   â”‚   â”‚   â””â”€â”€ public.controller.ts                                                                               â”‚
â”‚   â”‚   â”‚                                                                                                          â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ services/                  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                             â”‚
â”‚   â”‚   â”‚   â”‚                             â”‚ LÃ“GICA DE NEGOCIO CORE                   â”‚                             â”‚
â”‚   â”‚   â”‚   â”‚                             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                             â”‚
â”‚   â”‚   â”‚   â”‚                                                                                                      â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.service.ts           â€¢ Generar/Validar JWT                                                    â”‚
â”‚   â”‚   â”‚   â”‚                             â€¢ Hash passwords (bcrypt)                                                â”‚
â”‚   â”‚   â”‚   â”‚                             â€¢ Refresh tokens                                                         â”‚
â”‚   â”‚   â”‚   â”‚                                                                                                      â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ organization.service.ts   â€¢ CRUD organizaciones                                                    â”‚
â”‚   â”‚   â”‚   â”‚                             â€¢ Validar lÃ­mites de plan                                                â”‚
â”‚   â”‚   â”‚   â”‚                                                                                                      â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ championship.service.ts   â€¢ CRUD campeonatos                                                       â”‚
â”‚   â”‚   â”‚   â”‚                             â€¢ Validar configuraciÃ³n por deporte                                      â”‚
â”‚   â”‚   â”‚   â”‚                                                                                                      â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ team.service.ts           â€¢ CRUD equipos                                                           â”‚
â”‚   â”‚   â”‚   â”‚                             â€¢ CSV Import con validaciÃ³n                                              â”‚
â”‚   â”‚   â”‚   â”‚                                                                                                      â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ player.service.ts         â€¢ CRUD jugadores                                                         â”‚
â”‚   â”‚   â”‚   â”‚                             â€¢ EstadÃ­sticas individuales                                              â”‚
â”‚   â”‚   â”‚   â”‚                                                                                                      â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ match.service.ts          â€¢ CRUD partidos                                                          â”‚
â”‚   â”‚   â”‚   â”‚                             â€¢ ActualizaciÃ³n de scores                                                â”‚
â”‚   â”‚   â”‚   â”‚                             â€¢ Cambio de estados                                                      â”‚
â”‚   â”‚   â”‚   â”‚                                                                                                      â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ event.service.ts          â€¢ CRUD eventos de partido                                                â”‚
â”‚   â”‚   â”‚   â”‚                             â€¢ Calcular impacto en score                                              â”‚
â”‚   â”‚   â”‚   â”‚                                                                                                      â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ standing.service.ts       â€¢ Calcular tabla de posiciones                                           â”‚
â”‚   â”‚   â”‚   â”‚                             â€¢ Recalcular tras partido finalizado                                     â”‚
â”‚   â”‚   â”‚   â”‚                             â€¢ Tiebreakers por deporte                                                â”‚
â”‚   â”‚   â”‚   â”‚                                                                                                      â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ csv-import.service.ts     â€¢ Parsear CSV                                                            â”‚
â”‚   â”‚   â”‚   â”‚                             â€¢ Validar datos                                                          â”‚
â”‚   â”‚   â”‚   â”‚                             â€¢ Crear equipos/jugadores en batch                                       â”‚
â”‚   â”‚   â”‚   â”‚                                                                                                      â”‚
â”‚   â”‚   â”‚   â””â”€â”€ log.service.ts            â€¢ Registrar acciones de auditorÃ­a                                        â”‚
â”‚   â”‚   â”‚                                 â€¢ Generar reportes                                                       â”‚
â”‚   â”‚   â”‚                                                                                                          â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ socket/                    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•     â”‚
â”‚   â”‚   â”‚   â”‚                             â”‚                WEBSOCKET SERVER (Socket.io)                       â”‚     â”‚
â”‚   â”‚   â”‚   â”‚                             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•     â”‚
â”‚   â”‚   â”‚   â”‚                                                                                                      â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ socket.server.ts          Entry point de Socket.io                                                 â”‚
â”‚   â”‚   â”‚   â”‚                                                                                                      â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ socket.auth.ts            Middleware de autenticaciÃ³n para WS                                      â”‚
â”‚   â”‚   â”‚   â”‚                             â€¢ Validar JWT en handshake                                               â”‚
â”‚   â”‚   â”‚   â”‚                             â€¢ Adjuntar usuario a socket                                              â”‚
â”‚   â”‚   â”‚   â”‚                                                                                                      â”‚
â”‚   â”‚   â”‚   â””â”€â”€ match.socket.ts           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•      â”‚
â”‚   â”‚   â”‚                                 â”‚              EVENTOS WEBSOCKET POR PARTIDO                       â”‚      â”‚
â”‚   â”‚   â”‚                                 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•      â”‚
â”‚   â”‚   â”‚                                                                                                          â”‚
â”‚   â”‚   â”‚                                 ğŸ“¥ CLIENT â†’ SERVER (Requiere Auth)                                       â”‚
â”‚   â”‚   â”‚                                 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”‚
â”‚   â”‚   â”‚                                 â€¢ match:join          â†’ Unirse a room del partido                        â”‚
â”‚   â”‚   â”‚                                 â€¢ match:leave         â†’ Salir de room                                    â”‚
â”‚   â”‚   â”‚                                 â€¢ match:event:create  â†’ Admin registra evento (gol, tarjeta)             â”‚
â”‚   â”‚   â”‚                                 â€¢ match:timer:start   â†’ Admin inicia cronÃ³metro                          â”‚
â”‚   â”‚   â”‚                                 â€¢ match:timer:pause   â†’ Admin pausa cronÃ³metro                           â”‚
â”‚   â”‚   â”‚                                 â€¢ match:timer:reset   â†’ Admin reinicia cronÃ³metro                        â”‚
â”‚   â”‚   â”‚                                 â€¢ match:score:update  â†’ Admin actualiza marcador manual                  â”‚
â”‚   â”‚   â”‚                                 â€¢ match:status:change â†’ Admin cambia estado (live/finished/etc)          â”‚
â”‚   â”‚   â”‚                                                                                                          â”‚
â”‚   â”‚   â”‚                                 ğŸ“¤ SERVER â†’ CLIENT (Broadcast a room)                                    â”‚
â”‚   â”‚   â”‚                                 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”‚
â”‚   â”‚   â”‚                                 â€¢ match:event:new     â†’ Nuevo evento registrado                          â”‚
â”‚   â”‚   â”‚                                 â€¢ match:event:deleted â†’ Evento eliminado                                 â”‚
â”‚   â”‚   â”‚                                 â€¢ match:score:updated â†’ Marcador cambiÃ³                                  â”‚
â”‚   â”‚   â”‚                                 â€¢ match:timer:tick    â†’ ActualizaciÃ³n cada segundo                       â”‚
â”‚   â”‚   â”‚                                 â€¢ match:status:changedâ†’ Estado del partido cambiÃ³                        â”‚
â”‚   â”‚   â”‚                                 â€¢ match:finished      â†’ Partido finalizado                               â”‚
â”‚   â”‚   â”‚                                                                                                          â”‚
â”‚   â”‚   â”‚                                 ğŸ”„ ROOMS                                                                  â”‚
â”‚   â”‚   â”‚                                 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”‚
â”‚   â”‚   â”‚                                 â€¢ match:{matchId}     â†’ Todos los espectadores de un partido             â”‚
â”‚   â”‚   â”‚                                 â€¢ championship:{id}   â†’ Todos los de un campeonato                       â”‚
â”‚   â”‚   â”‚                                 â€¢ admin:{orgId}       â†’ Todos los admins de una organizaciÃ³n             â”‚
â”‚   â”‚   â”‚                                                                                                          â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ models/                    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                             â”‚
â”‚   â”‚   â”‚   â”‚                             â”‚ MONGOOSE SCHEMAS (MongoDB)               â”‚                             â”‚
â”‚   â”‚   â”‚   â”‚                             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                             â”‚
â”‚   â”‚   â”‚   â”‚                                                                                                      â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ Organization.model.ts     â†’ organizations collection                                               â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ User.model.ts             â†’ users collection                                                       â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ Championship.model.ts     â†’ championships collection                                               â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ Team.model.ts             â†’ teams collection                                                       â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ Player.model.ts           â†’ players collection                                                     â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ Match.model.ts            â†’ matches collection                                                     â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ Event.model.ts            â†’ events collection                                                      â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ Standing.model.ts         â†’ standings collection                                                   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ Log.model.ts              â†’ logs collection                                                        â”‚
â”‚   â”‚   â”‚                                                                                                          â”‚
â”‚   â”‚   â””â”€â”€ ğŸ“‚ utils/                                                                                              â”‚
â”‚   â”‚       â”œâ”€â”€ jwt.util.ts               â†’ Generar/Verificar tokens                                               â”‚
â”‚   â”‚       â”œâ”€â”€ password.util.ts          â†’ Hash/Compare passwords                                                 â”‚
â”‚   â”‚       â”œâ”€â”€ csv-parser.util.ts        â†’ Parsear archivos CSV                                                   â”‚
â”‚   â”‚       â””â”€â”€ sport-config.util.ts      â†’ Configuraciones por deporte                                            â”‚
â”‚   â”‚                                                                                                              â”‚
â”‚   â””â”€â”€ ğŸ“„ package.json                                                                                            â”‚
â”‚                                                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                       â”‚
                                                       â”‚  Mongoose ODM
                                                       â”‚
                                                       â–¼
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                              ğŸ’¾ CAPA DE DATOS
                                                 (MONGODB)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                                                  â”‚
â”‚                                        ğŸ—„ï¸ MONGODB DATABASE: iceplay_db                                          â”‚
â”‚                                                                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                                                                         â”‚   â”‚
â”‚   â”‚   ğŸ“¦ COLLECTIONS                                                                                        â”‚   â”‚
â”‚   â”‚                                                                                                         â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚   â”‚   â”‚                                                                                                   â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   ğŸ¢ organizations                                                                                â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ _id: ObjectId                                                                               â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ name: String                                                                                â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ slug: String (unique)                                                                       â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ logo: String (URL)                                                                          â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ contactEmail: String                                                                        â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ contactPhone: String                                                                        â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ planLimits: {                                                                               â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚     maxTeams: Number,                                                                         â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚     maxPlayers: Number,                                                                       â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚     maxChampionships: Number                                                                  â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   }                                                                                           â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ colors: { primary: String, secondary: String }                                              â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ status: String (active/inactive/suspended)                                                  â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ createdAt: Date                                                                             â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ updatedAt: Date                                                                             â”‚ â”‚   â”‚
â”‚   â”‚   â”‚                                                                                                   â”‚ â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚   â”‚                                                                                                         â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚   â”‚   â”‚                                                                                                   â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   ğŸ‘¤ users                                                                                        â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ _id: ObjectId                                                                               â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ email: String (unique)                                                                      â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ password: String (hashed)                                                                   â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ firstName: String                                                                           â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ lastName: String                                                                            â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ phone: String                                                                               â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ role: String (super_admin/admin)                                                            â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ organizationId: ObjectId â†’ organizations (null for super_admin)                             â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ isActive: Boolean                                                                           â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ lastLoginAt: Date                                                                           â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ createdAt: Date                                                                             â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ updatedAt: Date                                                                             â”‚ â”‚   â”‚
â”‚   â”‚   â”‚                                                                                                   â”‚ â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚   â”‚                                                                                                         â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚   â”‚   â”‚                                                                                                   â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   ğŸ† championships                                                                                â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ _id: ObjectId                                                                               â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ organizationId: ObjectId â†’ organizations                                                    â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ name: String                                                                                â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ slug: String (unique per org)                                                               â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ sport: String (football/basketball/volleyball)                                              â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ format: String (league/cup/group_stage)                                                     â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ season: String                                                                              â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ description: String                                                                         â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ logo: String                                                                                â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ startDate: Date                                                                             â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ endDate: Date                                                                               â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ status: String (draft/registration/active/finished/cancelled)                               â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ settings: {                                                                                 â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚     pointsForWin: Number,                                                                     â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚     pointsForDraw: Number,                                                                    â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚     pointsForLoss: Number,                                                                    â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚     roundsCount: Number,                                                                      â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚     tiebreakers: [String],                                                                    â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚     allowDraws: Boolean,                                                                      â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚     extraTimeAllowed: Boolean,                                                                â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚     penaltyShootoutAllowed: Boolean                                                           â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   }                                                                                           â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ totalTeams: Number                                                                          â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ totalMatches: Number                                                                        â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ matchesPlayed: Number                                                                       â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ createdAt: Date                                                                             â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ updatedAt: Date                                                                             â”‚ â”‚   â”‚
â”‚   â”‚   â”‚                                                                                                   â”‚ â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚   â”‚                                                                                                         â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚   â”‚   â”‚                                                                                                   â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   ğŸ‘¥ teams                                                                                        â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ _id: ObjectId                                                                               â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ championshipId: ObjectId â†’ championships                                                    â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ organizationId: ObjectId â†’ organizations (denormalized)                                     â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ name: String                                                                                â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ shortName: String                                                                           â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ slug: String                                                                                â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ logo: String                                                                                â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ primaryColor: String                                                                        â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ secondaryColor: String                                                                      â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ city: String                                                                                â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ homeVenue: String                                                                           â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ foundedYear: Number                                                                         â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ managerName: String                                                                         â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ managerPhone: String                                                                        â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ managerEmail: String                                                                        â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ isActive: Boolean                                                                           â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ hasActiveMatches: Boolean                                                                   â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ playersCount: Number (virtual/calculated)                                                   â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ createdAt: Date                                                                             â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ updatedAt: Date                                                                             â”‚ â”‚   â”‚
â”‚   â”‚   â”‚                                                                                                   â”‚ â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚   â”‚                                                                                                         â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚   â”‚   â”‚                                                                                                   â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   âš½ players                                                                                      â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ _id: ObjectId                                                                               â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ teamId: ObjectId â†’ teams                                                                    â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ championshipId: ObjectId â†’ championships (denormalized)                                     â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ organizationId: ObjectId â†’ organizations (denormalized)                                     â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ firstName: String                                                                           â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ lastName: String                                                                            â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ fullName: String (virtual: firstName + lastName)                                            â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ number: Number                                                                              â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ position: String                                                                            â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ secondaryPosition: String                                                                   â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ document: String (DNI/CÃ©dula)                                                               â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ birthDate: Date                                                                             â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ nationality: String                                                                         â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ height: Number (cm)                                                                         â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ weight: Number (kg)                                                                         â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ photo: String                                                                               â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ status: String (active/injured/suspended/inactive)                                          â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ stats: {                           â†â”€â”€ DINÃMICO SEGÃšN DEPORTE                               â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚     // Football                                                                               â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚     matchesPlayed: Number,                                                                    â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚     minutesPlayed: Number,                                                                    â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚     goals: Number,                                                                            â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚     assists: Number,                                                                          â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚     yellowCards: Number,                                                                      â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚     redCards: Number,                                                                         â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚     // Basketball                                                                             â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚     points: Number,                                                                           â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚     freeThrows: Number,                                                                       â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚     twoPointers: Number,                                                                      â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚     threePointers: Number,                                                                    â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚     rebounds: Number,                                                                         â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚     steals: Number,                                                                           â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚     blocks: Number,                                                                           â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚     // Volleyball                                                                             â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚     aces: Number,                                                                             â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚     kills: Number,                                                                            â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚     blockPoints: Number,                                                                      â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚     digs: Number,                                                                             â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚     errors: Number                                                                            â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   }                                                                                           â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ createdAt: Date                                                                             â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ updatedAt: Date                                                                             â”‚ â”‚   â”‚
â”‚   â”‚   â”‚                                                                                                   â”‚ â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚   â”‚                                                                                                         â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚   â”‚   â”‚                                                                                                   â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   ğŸ® matches                                                                                      â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ _id: ObjectId                                                                               â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ championshipId: ObjectId â†’ championships                                                    â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ organizationId: ObjectId â†’ organizations (denormalized)                                     â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ homeTeamId: ObjectId â†’ teams                                                                â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ awayTeamId: ObjectId â†’ teams                                                                â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ homeScore: Number                                                                           â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ awayScore: Number                                                                           â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ status: String (scheduled/warmup/live/halftime/break/overtime/penalties/                    â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚                   finished/suspended/postponed/cancelled)                                     â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ round: Number                                                                               â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ matchday: Number                                                                            â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ group: String                                                                               â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ stage: String                                                                               â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ scheduledDate: Date                                                                         â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ scheduledTime: String                                                                       â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ actualStartTime: Date                                                                       â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ actualEndTime: Date                                                                         â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ venue: String                                                                               â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ city: String                                                                                â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ referee: String                                                                             â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ assistantReferee1: String                                                                   â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ assistantReferee2: String                                                                   â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ currentPeriod: Number                                                                       â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ elapsedSeconds: Number                                                                      â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ isClockRunning: Boolean                                                                     â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ periodScores: [{                                                                            â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚     period: Number,                                                                           â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚     homeScore: Number,                                                                        â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚     awayScore: Number                                                                         â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   }]                                                                                          â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ homeSets: Number (volleyball)                                                               â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ awaySets: Number (volleyball)                                                               â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ notes: String                                                                               â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ isHighlighted: Boolean                                                                      â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ streamUrl: String                                                                           â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ createdAt: Date                                                                             â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ updatedAt: Date                                                                             â”‚ â”‚   â”‚
â”‚   â”‚   â”‚                                                                                                   â”‚ â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚   â”‚                                                                                                         â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚   â”‚   â”‚                                                                                                   â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   âš¡ events (Eventos de partido)                                                                  â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ _id: ObjectId                                                                               â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ matchId: ObjectId â†’ matches                                                                 â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ championshipId: ObjectId â†’ championships (denormalized)                                     â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ type: String (goal/yellow_card/red_card/substitution/point/ace/etc)                         â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ playerId: ObjectId â†’ players                                                                â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ teamId: ObjectId â†’ teams                                                                    â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ relatedPlayerId: ObjectId â†’ players (para sustituciones)                                    â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ period: Number                                                                              â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ minute: Number                                                                              â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ extraMinute: Number                                                                         â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ description: String                                                                         â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ createdBy: ObjectId â†’ users                                                                 â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ updatedBy: ObjectId â†’ users                                                                 â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ createdAt: Date                                                                             â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ updatedAt: Date                                                                             â”‚ â”‚   â”‚
â”‚   â”‚   â”‚                                                                                                   â”‚ â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚   â”‚                                                                                                         â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚   â”‚   â”‚                                                                                                   â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   ğŸ“Š standings (Tabla de posiciones)                                                    ğŸ†•        â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ _id: ObjectId                                                                               â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ championshipId: ObjectId â†’ championships                                                    â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ teamId: ObjectId â†’ teams                                                                    â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ group: String (para fase de grupos)                                                         â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ position: Number                                                                            â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ played: Number                                                                              â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ won: Number                                                                                 â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ drawn: Number                                                                               â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ lost: Number                                                                                â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ goalsFor: Number (puntos a favor en basket/volley)                                          â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ goalsAgainst: Number                                                                        â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ goalDifference: Number (virtual)                                                            â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ points: Number                                                                              â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ form: [String] (Ãºltimos 5: W/D/L)                                                           â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ homeRecord: { won, drawn, lost }                                                            â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ awayRecord: { won, drawn, lost }                                                            â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ updatedAt: Date                                                                             â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ lastMatchId: ObjectId â†’ matches                                                             â”‚ â”‚   â”‚
â”‚   â”‚   â”‚                                                                                                   â”‚ â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚   â”‚                                                                                                         â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚   â”‚   â”‚                                                                                                   â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   ğŸ“ logs (AuditorÃ­a)                                                                   ğŸ†•        â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ _id: ObjectId                                                                               â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ action: String (organization_created/championship_created/match_started/                    â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”‚                   match_finalized/event_created/csv_import_completed/etc)                     â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ entityType: String (organization/championship/team/player/match/event)                      â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ entityId: ObjectId                                                                          â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ userId: ObjectId â†’ users                                                                    â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ organizationId: ObjectId â†’ organizations                                                    â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ details: Mixed (JSON con detalles especÃ­ficos)                                              â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ipAddress: String                                                                           â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ createdAt: Date                                                                             â”‚ â”‚   â”‚
â”‚   â”‚   â”‚                                                                                                   â”‚ â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚   â”‚                                                                                                         â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚   â”‚   â”‚                                                                                                   â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   ğŸ“¢ announcements (Anuncios)                                                                     â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ _id: ObjectId                                                                               â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ championshipId: ObjectId â†’ championships                                                    â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ organizationId: ObjectId â†’ organizations                                                    â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ title: String                                                                               â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ content: String                                                                             â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ type: String (info/warning/urgent)                                                          â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ isPublished: Boolean                                                                        â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ publishedAt: Date                                                                           â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ createdBy: ObjectId â†’ users                                                                 â”‚ â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ createdAt: Date                                                                             â”‚ â”‚   â”‚
â”‚   â”‚   â”‚                                                                                                   â”‚ â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚   â”‚                                                                                                         â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                                                                         â”‚   â”‚
â”‚   â”‚   ğŸ“‡ INDEXES (Para performance)                                                                         â”‚   â”‚
â”‚   â”‚                                                                                                         â”‚   â”‚
â”‚   â”‚   organizations:  { slug: 1 } unique                                                                    â”‚   â”‚
â”‚   â”‚   users:          { email: 1 } unique, { organizationId: 1, role: 1 }                                   â”‚   â”‚
â”‚   â”‚   championships:  { organizationId: 1, status: 1 }, { slug: 1, organizationId: 1 } unique               â”‚   â”‚
â”‚   â”‚   teams:          { championshipId: 1 }, { organizationId: 1 }, { slug: 1 }                             â”‚   â”‚
â”‚   â”‚   players:        { teamId: 1 }, { championshipId: 1 }, { document: 1 }                                 â”‚   â”‚
â”‚   â”‚   matches:        { championshipId: 1, status: 1 }, { scheduledDate: 1 }, { homeTeamId: 1, awayTeamId: 1 }â”‚   â”‚
â”‚   â”‚   events:         { matchId: 1 }, { playerId: 1 }, { type: 1 }                                          â”‚   â”‚
â”‚   â”‚   standings:      { championshipId: 1, position: 1 }, { teamId: 1 }                                     â”‚   â”‚
â”‚   â”‚   logs:           { organizationId: 1, createdAt: -1 }, { entityType: 1, entityId: 1 }                  â”‚   â”‚
â”‚   â”‚                                                                                                         â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                        ğŸ”— DIAGRAMA DE RELACIONES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                                                  â”‚
â”‚                                                                                                                  â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                                                          â”‚
â”‚     â”‚  ğŸ¢ Organization â”‚                                                                                         â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                                                          â”‚
â”‚              â”‚                                                                                                   â”‚
â”‚              â”‚ 1:N                                                                                               â”‚
â”‚              â”‚                                                                                                   â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                             â”‚
â”‚    â”‚                   â”‚                                           â”‚                                             â”‚
â”‚    â–¼                   â–¼                                           â–¼                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚  â”‚ ğŸ‘¤ User   â”‚   â”‚ ğŸ† Championship â”‚                         â”‚ ğŸ“ Log    â”‚                                       â”‚
â”‚  â”‚ (Admin)   â”‚   â”‚                 â”‚                         â”‚           â”‚                                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚                           â”‚                                                                                      â”‚
â”‚                           â”‚ 1:N                                                                                  â”‚
â”‚                           â”‚                                                                                      â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                â”‚
â”‚              â”‚            â”‚            â”‚                        â”‚                                                â”‚
â”‚              â–¼            â–¼            â–¼                        â–¼                                                â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚        â”‚ ğŸ‘¥ Team  â”‚ â”‚ ğŸ“ŠStandingâ”‚ â”‚ ğŸ“¢ Announceâ”‚          â”‚ ğŸ® Match     â”‚                                       â”‚
â”‚        â”‚          â”‚ â”‚           â”‚ â”‚           â”‚          â”‚              â”‚                                       â”‚
â”‚        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚             â”‚                                                    â”‚                                               â”‚
â”‚             â”‚ 1:N                                                 â”‚ 1:N                                           â”‚
â”‚             â”‚                                                    â”‚                                               â”‚
â”‚             â–¼                                                    â–¼                                               â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚       â”‚ âš½ Player â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ âš¡ Event  â”‚                                         â”‚
â”‚       â”‚           â”‚                                        â”‚           â”‚                                         â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â”‚                                                                                                                  â”‚
â”‚                                                                                                                  â”‚
â”‚   LEYENDA DE RELACIONES:                                                                                         â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                                          â”‚
â”‚   Organization â”€(1:N)â”€â”€â–º User          (Un org tiene muchos admins)                                              â”‚
â”‚   Organization â”€(1:N)â”€â”€â–º Championship  (Un org tiene muchos campeonatos)                                         â”‚
â”‚   Organization â”€(1:N)â”€â”€â–º Log           (Logs por organizaciÃ³n)                                                   â”‚
â”‚   Championship â”€(1:N)â”€â”€â–º Team          (Un campeonato tiene muchos equipos)                                      â”‚
â”‚   Championship â”€(1:N)â”€â”€â–º Match         (Un campeonato tiene muchos partidos)                                     â”‚
â”‚   Championship â”€(1:N)â”€â”€â–º Standing      (Tabla de posiciones por campeonato)                                      â”‚
â”‚   Championship â”€(1:N)â”€â”€â–º Announcement  (Anuncios por campeonato)                                                 â”‚
â”‚   Team â”€â”€â”€â”€â”€â”€â”€â”€â”€(1:N)â”€â”€â–º Player        (Un equipo tiene muchos jugadores)                                        â”‚
â”‚   Team â”€â”€â”€â”€â”€â”€â”€â”€â”€(N:N)â”€â”€â–º Match         (Equipos juegan partidos como local/visitante)                            â”‚
â”‚   Match â”€â”€â”€â”€â”€â”€â”€â”€(1:N)â”€â”€â–º Event         (Un partido tiene muchos eventos)                                         â”‚
â”‚   Player â”€â”€â”€â”€â”€â”€â”€(1:N)â”€â”€â–º Event         (Un jugador participa en eventos)                                         â”‚
â”‚                                                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                         ğŸ”„ FLUJOS DE DATOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                                                  â”‚
â”‚   ğŸ“Œ FLUJO 1: LOGIN Y AUTENTICACIÃ“N                                                                              â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     POST /auth/login     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      Validar        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚   â”‚  User   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ Express â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ MongoDB â”‚                              â”‚
â”‚   â”‚ Angular â”‚     {email, password}    â”‚   API   â”‚    credenciales     â”‚  users  â”‚                              â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                              â”‚
â”‚        â–²                                    â”‚                               â”‚                                    â”‚
â”‚        â”‚                                    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚        â”‚      { token, user, org }         â”‚          User found                                                 â”‚
â”‚        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                     â”‚
â”‚        â”‚                                                                                                         â”‚
â”‚        â”‚    Guardar token en memoria                                                                             â”‚
â”‚        â”‚    (signal en AuthService)                                                                              â”‚
â”‚                                                                                                                  â”‚
â”‚                                                                                                                  â”‚
â”‚   ğŸ“Œ FLUJO 2: CREAR PARTIDO Y NOTIFICAR EN TIEMPO REAL                                                           â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     POST /matches        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      Guardar       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚   â”‚  Admin  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ Express â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ MongoDB â”‚                               â”‚
â”‚   â”‚ Angular â”‚     {match data}         â”‚   API   â”‚                    â”‚ matches â”‚                               â”‚
â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                          â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚        â”‚                                    â”‚                                                                    â”‚
â”‚        â”‚                                    â”‚     Emitir evento                                                  â”‚
â”‚        â”‚                                    â”‚     Socket.io                                                      â”‚
â”‚        â”‚                                    â–¼                                                                    â”‚
â”‚        â”‚                             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                             â”‚
â”‚        â”‚                             â”‚  Socket.io  â”‚                                                             â”‚
â”‚        â”‚                             â”‚   Server    â”‚                                                             â”‚
â”‚        â”‚                             â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                                             â”‚
â”‚        â”‚                                    â”‚                                                                    â”‚
â”‚        â”‚                                    â”‚ Broadcast to room                                                  â”‚
â”‚        â”‚                                    â”‚ 'championship:{id}'                                                â”‚
â”‚        â”‚                                    â–¼                                                                    â”‚
â”‚        â”‚                             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                             â”‚
â”‚        â”‚                             â”‚ Espectadores â”‚                                                            â”‚
â”‚        â”‚                             â”‚  suscritos   â”‚                                                            â”‚
â”‚        â”‚                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                             â”‚
â”‚        â”‚                                                                                                         â”‚
â”‚        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ConfirmaciÃ³n HTTP + WebSocket update                                                    â”‚
â”‚                                                                                                                  â”‚
â”‚                                                                                                                  â”‚
â”‚   ğŸ“Œ FLUJO 3: CONTROL DE PARTIDO EN VIVO                                                                         â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                                                                         â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚   â”‚
â”‚   â”‚   â”‚   Admin   â”‚                 â”‚    Server     â”‚                 â”‚  Espectadores â”‚                     â”‚   â”‚
â”‚   â”‚   â”‚ (Control) â”‚                 â”‚ (Express+WS)  â”‚                 â”‚   (Vista)     â”‚                     â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚   â”‚
â”‚   â”‚         â”‚                               â”‚                                 â”‚                             â”‚   â”‚
â”‚   â”‚         â”‚  WS: match:join               â”‚                                 â”‚                             â”‚   â”‚
â”‚   â”‚         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                                 â”‚                             â”‚   â”‚
â”‚   â”‚         â”‚                               â”‚                                 â”‚  WS: match:join             â”‚   â”‚
â”‚   â”‚         â”‚                               â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                             â”‚   â”‚
â”‚   â”‚         â”‚                               â”‚                                 â”‚                             â”‚   â”‚
â”‚   â”‚         â”‚  WS: match:timer:start        â”‚                                 â”‚                             â”‚   â”‚
â”‚   â”‚         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                                 â”‚                             â”‚   â”‚
â”‚   â”‚         â”‚                               â”‚â”€â”                               â”‚                             â”‚   â”‚
â”‚   â”‚         â”‚                               â”‚ â”‚ Guardar en DB                 â”‚                             â”‚   â”‚
â”‚   â”‚         â”‚                               â”‚â—„â”˜                               â”‚                             â”‚   â”‚
â”‚   â”‚         â”‚                               â”‚                                 â”‚                             â”‚   â”‚
â”‚   â”‚         â”‚                               â”‚  WS: match:timer:tick           â”‚                             â”‚   â”‚
â”‚   â”‚         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                             â”‚   â”‚
â”‚   â”‚         â”‚                               â”‚  (Cada segundo)                 â”‚                             â”‚   â”‚
â”‚   â”‚         â”‚                               â”‚                                 â”‚                             â”‚   â”‚
â”‚   â”‚         â”‚  WS: match:event:create       â”‚                                 â”‚                             â”‚   â”‚
â”‚   â”‚         â”‚  { type: 'goal', player: X }  â”‚                                 â”‚                             â”‚   â”‚
â”‚   â”‚         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                                 â”‚                             â”‚   â”‚
â”‚   â”‚         â”‚                               â”‚â”€â”                               â”‚                             â”‚   â”‚
â”‚   â”‚         â”‚                               â”‚ â”‚ Guardar evento                â”‚                             â”‚   â”‚
â”‚   â”‚         â”‚                               â”‚ â”‚ Actualizar score              â”‚                             â”‚   â”‚
â”‚   â”‚         â”‚                               â”‚ â”‚ Actualizar stats              â”‚                             â”‚   â”‚
â”‚   â”‚         â”‚                               â”‚â—„â”˜                               â”‚                             â”‚   â”‚
â”‚   â”‚         â”‚                               â”‚                                 â”‚                             â”‚   â”‚
â”‚   â”‚         â”‚  WS: match:score:updated      â”‚  WS: match:score:updated        â”‚                             â”‚   â”‚
â”‚   â”‚         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                             â”‚   â”‚
â”‚   â”‚         â”‚  WS: match:event:new          â”‚  WS: match:event:new            â”‚                             â”‚   â”‚
â”‚   â”‚         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                             â”‚   â”‚
â”‚   â”‚         â”‚                               â”‚                                 â”‚                             â”‚   â”‚
â”‚   â”‚         â”‚  WS: match:status:change      â”‚                                 â”‚                             â”‚   â”‚
â”‚   â”‚         â”‚  { status: 'finished' }       â”‚                                 â”‚                             â”‚   â”‚
â”‚   â”‚         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                                 â”‚                             â”‚   â”‚
â”‚   â”‚         â”‚                               â”‚â”€â”                               â”‚                             â”‚   â”‚
â”‚   â”‚         â”‚                               â”‚ â”‚ Finalizar partido             â”‚                             â”‚   â”‚
â”‚   â”‚         â”‚                               â”‚ â”‚ Recalcular standings          â”‚                             â”‚   â”‚
â”‚   â”‚         â”‚                               â”‚ â”‚ Actualizar stats jugadores    â”‚                             â”‚   â”‚
â”‚   â”‚         â”‚                               â”‚â—„â”˜                               â”‚                             â”‚   â”‚
â”‚   â”‚         â”‚                               â”‚                                 â”‚                             â”‚   â”‚
â”‚   â”‚         â”‚  WS: match:finished           â”‚  WS: match:finished             â”‚                             â”‚   â”‚
â”‚   â”‚         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                             â”‚   â”‚
â”‚   â”‚         â”‚                               â”‚                                 â”‚                             â”‚   â”‚
â”‚   â”‚                                                                                                         â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                                                  â”‚
â”‚                                                                                                                  â”‚
â”‚   ğŸ“Œ FLUJO 4: IMPORTACIÃ“N CSV                                                                                    â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     POST /teams/import-csv   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                          â”‚
â”‚   â”‚  Admin  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ Express â”‚                                                          â”‚
â”‚   â”‚ Angular â”‚     multipart/form-data      â”‚   API   â”‚                                                          â”‚
â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     (archivo.csv)            â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                                          â”‚
â”‚        â”‚                                        â”‚                                                                â”‚
â”‚        â”‚                                        â”‚  1. Parsear CSV                                                â”‚
â”‚        â”‚                                        â”‚  2. Validar estructura                                         â”‚
â”‚        â”‚                                        â”‚  3. Verificar lÃ­mites plan                                     â”‚
â”‚        â”‚                                        â”‚  4. Detectar duplicados                                        â”‚
â”‚        â”‚                                        â”‚                                                                â”‚
â”‚        â”‚                                        â–¼                                                                â”‚
â”‚        â”‚                                   Por cada fila:                                                        â”‚
â”‚        â”‚                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚
â”‚        â”‚                                   â”‚ IF team_name no existe:         â”‚                                   â”‚
â”‚        â”‚                                   â”‚   â†’ Crear equipo                â”‚                                   â”‚
â”‚        â”‚                                   â”‚                                 â”‚                                   â”‚
â”‚        â”‚                                   â”‚ IF player no existe (document): â”‚                                   â”‚
â”‚        â”‚                                   â”‚   â†’ Crear jugador               â”‚                                   â”‚
â”‚        â”‚                                   â”‚ ELSE:                           â”‚                                   â”‚
â”‚        â”‚                                   â”‚   â†’ Agregar a warnings          â”‚                                   â”‚
â”‚        â”‚                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚
â”‚        â”‚                                        â”‚                                                                â”‚
â”‚        â”‚                                        â–¼                                                                â”‚
â”‚        â”‚    {                              Respuesta:                                                            â”‚
â”‚        â”‚      teamsImported: 5,                                                                                  â”‚
â”‚        â”‚      playersImported: 48,                                                                               â”‚
â”‚        â”‚      teamsSkipped: ["Equipo X"],                                                                        â”‚
â”‚        â”‚      playersSkipped: [...],                                                                             â”‚
â”‚        â”‚      warnings: ["Duplicado en fila 12"]                                                                 â”‚
â”‚        â”‚    }                                                                                                    â”‚
â”‚        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                 â”‚
â”‚                                                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                   ğŸ” MATRIZ DE PERMISOS POR ROL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚   â”‚      RECURSO         â”‚  ğŸŒ PÃºblico    â”‚  ğŸ‘¤ Admin Org  â”‚  ğŸ‘‘ Super Adminâ”‚    Notas       â”‚                  â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚
â”‚   â”‚ Organizations        â”‚      âŒ        â”‚      âŒ        â”‚   âœ… CRUD      â”‚ Solo Fropen    â”‚                  â”‚
â”‚   â”‚ Users (admins)       â”‚      âŒ        â”‚      âŒ        â”‚   âœ… CRUD      â”‚ Solo Fropen    â”‚                  â”‚
â”‚   â”‚ Championships        â”‚   âœ… Read (pub)â”‚   âœ… CRUD (own)â”‚   âœ… All       â”‚ Filtrado x org â”‚                  â”‚
â”‚   â”‚ Teams                â”‚   âœ… Read (pub)â”‚   âœ… CRUD (own)â”‚   âœ… All       â”‚ Filtrado x org â”‚                  â”‚
â”‚   â”‚ Players              â”‚   âœ… Read (pub)â”‚   âœ… CRUD (own)â”‚   âœ… All       â”‚ Filtrado x org â”‚                  â”‚
â”‚   â”‚ Matches              â”‚   âœ… Read (pub)â”‚   âœ… CRUD (own)â”‚   âœ… All       â”‚ Filtrado x org â”‚                  â”‚
â”‚   â”‚ Match Control (WS)   â”‚      âŒ        â”‚   âœ… Own       â”‚   âœ… All       â”‚ Real-time      â”‚                  â”‚
â”‚   â”‚ Events               â”‚   âœ… Read (pub)â”‚   âœ… CRUD (own)â”‚   âœ… All       â”‚ Filtrado x org â”‚                  â”‚
â”‚   â”‚ Standings            â”‚   âœ… Read (pub)â”‚   âœ… Read      â”‚   âœ… All       â”‚ Calculado      â”‚                  â”‚
â”‚   â”‚ Logs                 â”‚      âŒ        â”‚   âœ… Read (own)â”‚   âœ… All       â”‚ AuditorÃ­a      â”‚                  â”‚
â”‚   â”‚ CSV Import           â”‚      âŒ        â”‚   âœ… Own       â”‚   âœ… All       â”‚ Batch import   â”‚                  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                                                                                  â”‚
â”‚   LEYENDA:                                                                                                       â”‚
â”‚   âœ… CRUD    = Create, Read, Update, Delete                                                                      â”‚
â”‚   âœ… Read    = Solo lectura                                                                                      â”‚
â”‚   âœ… Own     = Solo recursos de su organizaciÃ³n                                                                  â”‚
â”‚   âœ… All     = Todos los recursos                                                                                â”‚
â”‚   âœ… (pub)   = Solo recursos marcados como pÃºblicos                                                              â”‚
â”‚   âŒ         = Sin acceso                                                                                        â”‚
â”‚                                                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                   ğŸš€ INFRAESTRUCTURA DE DEPLOYMENT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                      DESARROLLO LOCAL                                                    â”‚   â”‚
â”‚   â”‚                                                                                                         â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚   â”‚
â”‚   â”‚   â”‚  Angular Dev Server â”‚    â”‚    JSON-Server      â”‚    â”‚   (No DB needed)    â”‚                         â”‚   â”‚
â”‚   â”‚   â”‚  localhost:4200     â”‚â”€â”€â”€â–ºâ”‚   localhost:3000    â”‚    â”‚                     â”‚                         â”‚   â”‚
â”‚   â”‚   â”‚                     â”‚    â”‚   db.json           â”‚    â”‚                     â”‚                         â”‚   â”‚
â”‚   â”‚   â”‚  ng serve           â”‚    â”‚   npm run mock      â”‚    â”‚                     â”‚                         â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚   â”‚
â”‚   â”‚                                                                                                         â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                       PRODUCCIÃ“N                                                         â”‚   â”‚
â”‚   â”‚                                                                                                         â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                                                  â”‚   â”‚
â”‚   â”‚   â”‚   Cloudflare     â”‚                                                                                  â”‚   â”‚
â”‚   â”‚   â”‚   CDN + WAF      â”‚                                                                                  â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                                                  â”‚   â”‚
â”‚   â”‚            â”‚                                                                                            â”‚   â”‚
â”‚   â”‚            â–¼                                                                                            â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚   â”‚
â”‚   â”‚   â”‚                              KUBERNETES CLUSTER / DOCKER                                      â”‚      â”‚   â”‚
â”‚   â”‚   â”‚                                                                                               â”‚      â”‚   â”‚
â”‚   â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚      â”‚   â”‚
â”‚   â”‚   â”‚   â”‚  Nginx          â”‚    â”‚   API Server    â”‚    â”‚   WS Server     â”‚                          â”‚      â”‚   â”‚
â”‚   â”‚   â”‚   â”‚  (Static files) â”‚    â”‚   (Express)     â”‚    â”‚   (Socket.io)   â”‚                          â”‚      â”‚   â”‚
â”‚   â”‚   â”‚   â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚                          â”‚      â”‚   â”‚
â”‚   â”‚   â”‚   â”‚  Angular Build  â”‚â”€â”€â”€â–ºâ”‚  /api/v1/*      â”‚    â”‚   /socket.io    â”‚                          â”‚      â”‚   â”‚
â”‚   â”‚   â”‚   â”‚  (dist/)        â”‚    â”‚                 â”‚    â”‚                 â”‚                          â”‚      â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚      â”‚   â”‚
â”‚   â”‚   â”‚                                   â”‚                      â”‚                                   â”‚      â”‚   â”‚
â”‚   â”‚   â”‚                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚      â”‚   â”‚
â”‚   â”‚   â”‚                                              â”‚                                               â”‚      â”‚   â”‚
â”‚   â”‚   â”‚                                              â–¼                                               â”‚      â”‚   â”‚
â”‚   â”‚   â”‚                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚      â”‚   â”‚
â”‚   â”‚   â”‚                                   â”‚  MongoDB Atlas  â”‚                                        â”‚      â”‚   â”‚
â”‚   â”‚   â”‚                                   â”‚  (Replica Set)  â”‚                                        â”‚      â”‚   â”‚
â”‚   â”‚   â”‚                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚      â”‚   â”‚
â”‚   â”‚   â”‚                                                                                               â”‚      â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚   â”‚
â”‚   â”‚                                                                                                         â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                         ğŸ“… ROADMAP DE IMPLEMENTACIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                                                  â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚   FASE 1: CONSOLIDACIÃ“N FRONTEND + MOCK (Semana 1-2)                                                             â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                                                                  â”‚
â”‚   âœ… Ya completado:                                                                                              â”‚
â”‚   â”œ